import{r as e,s as t,$ as i}from"./41f4d65a.js";import{n as a,m as n,e as s,t as d,A as o,T as r,a as c,D as l,P as p,o as h,b as m,c as u,d as g,f as b}from"./3fdf381d.js";function v(e,t,i,a){var n,s=arguments.length,d=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(d=(s<3?n(d):s>3?n(t,i,d):n(t,i))||d);return s>3&&d&&Object.defineProperty(t,i,d),d
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class E{constructor(e){this.__litLocalizeEventHandler=e=>{"ready"===e.detail.status&&this.host.requestUpdate()},this.host=e}hostConnected(){window.addEventListener("lit-localize-status",this.__litLocalizeEventHandler)}hostDisconnected(){window.removeEventListener("lit-localize-status",this.__litLocalizeEventHandler)}}const A=e=>e.addController(new E(e)),f=()=>e=>"function"==typeof e?C(e):R(e),R=({kind:e,elements:t})=>({kind:e,elements:t,finisher(e){e.addInitializer(A)}}),C=e=>(e.addInitializer(A),e);let T=class extends t{render(){return i``}};T.styles=e``,T=v([a("frequent-requests-menu")],T);const y=e`.dark-border{border:1px solid #000;border-radius:10px}.medium-border{border:1px solid #5b5b5b;border-radius:10px}.light-border{border:1px solid #c4c4c4;border-radius:10px}.no-line-border{border-radius:10px}.view-ctr{padding:60px;width:1050px}.provenance-restriction{border:none;padding:0;margin:0}.provenance-restriction input{margin:20px 0 20px 30px}.provenance-restriction input:nth-last-child(3){margin:20px 0 0 30px}.provenance-restriction input:first-child{margin:35px 0 20px 30px}.date-restriction-ctr{display:grid;row-gap:35px}.date-restriction-ctr div{padding:0 0 0 30px}`,w=e`button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif}.svg-btn{border:none;padding:0;margin:0;background:0 0}.link-btn{display:grid;grid-auto-flow:column;font-size:16px;column-gap:7.5px;background:0 0;border:none;width:fit-content;align-items:center;padding:0}.nav-btn{height:50px;background-color:#18a0fb;border-width:0;border-radius:6px;font-size:18px;color:#fff;margin:0 0 -200px 0;padding:0 25px}.left-btn{justify-self:flex-start}.ctr-btn{justify-self:center;justify-content:center}.right-btn{justify-self:flex-end}.curve-btn{border-radius:8px}.animated-btn{box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}.animated-btn:not([disabled]):hover{transform:translateY(-2px);transition:.2s;box-shadow:0 7px 10px 0 rgba(0,0,0,.3),0 4px 4px rgba(0,0,0,.2),0 6px 8px rgba(0,0,0,.2),0 10px 16px rgba(0,0,0,.2)}.animated-btn:not([disabled]):active{transform:translateY(2px);transition:.2s;box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}`,N=e`.underline{text-decoration:underline}.italic{font-style:italic}.ctr-txt-vert{align-items:center;justify-content:center}.medium-font{color:#5b5b5b}.std-txt-area{background:#f8f8fc;border:1px solid #e5e5e5;border-radius:8px}.std-txt-input{background:#f8f8fc;border:1px solid #e5e5e5;border-radius:4px}p{padding:0;margin:0}`,I=e`.ctr-img{justify-content:center;align-items:center}.medium-img{filter:invert(34%) sepia(0) saturate(245%) hue-rotate(145deg) brightness(97%) contrast(83%)}`,S={ACCESS:()=>n("ACCESS"),DELETE:()=>n("DELETE"),MODIFY:()=>n("MODIFY"),OBJECT:()=>n("OBJECT"),PORTABILITY:()=>n("PORTABILITY"),RESTRICT:()=>n("RESTRICT"),"REVOKE-CONSENT":()=>n("REVOKE-CONSENT"),TRANSPARENCY:()=>n("TRANSPARENCY"),"TRANSPARENCY.DATA-CATEGORIES":()=>n("TRANSPARENCY.DATA-CATEGORIES"),"TRANSPARENCY.DPO":()=>n("TRANSPARENCY.DPO"),"TRANSPARENCY.KNOWN":()=>n("TRANSPARENCY.KNOWN"),"TRANSPARENCY.LEGAL-BASES":()=>n("TRANSPARENCY.LEGAL-BASES"),"TRANSPARENCY.ORGANIZATION":()=>n("TRANSPARENCY.ORGANIZATION"),"TRANSPARENCY.POLICY":()=>n("TRANSPARENCY.POLICY"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>n("TRANSPARENCY.PROCESSING-CATEGORIES"),"TRANSPARENCY.PROVENANCE":()=>n("TRANSPARENCY.PROVENANCE"),"TRANSPARENCY.PURPOSE":()=>n("TRANSPARENCY.PURPOSE"),"TRANSPARENCY.RETENTION":()=>n("TRANSPARENCY.RETENTION"),"TRANSPARENCY.WHERE":()=>n("TRANSPARENCY.WHERE"),"TRANSPARENCY.WHO":()=>n("TRANSPARENCY.WHO"),"OTHER-DEMAND":()=>n("OTHER-DEMAND")},x={ACCESS:()=>n("Access my data"),DELETE:()=>n("Have my data deleted"),MODIFY:()=>n("Modify or complement my data"),OBJECT:()=>n("Object to processing of my data"),PORTABILITY:()=>n("Take my data and have it transfered somewhere else"),RESTRICT:()=>n("Restrict processing of my data to a particular scope"),"REVOKE-CONSENT":()=>n("Revoke previously given consent for data processing"),TRANSPARENCY:()=>n("Demand information related to data processing practices and know if the system has data on me"),"OTHER-DEMAND":()=>n("Do or know something else"),"TRANSPARENCY.DATA-CATEGORIES":()=>n("The categories of the data the organization has on me"),"TRANSPARENCY.DPO":()=>n("The contact details of the data protection officer"),"TRANSPARENCY.KNOWN":()=>n("If the organization has data on me"),"TRANSPARENCY.LEGAL-BASES":()=>n("The legal bases for processing my data (including legitimate interests)"),"TRANSPARENCY.ORGANIZATION":()=>n("The identity and contact details of the organization processing my data"),"TRANSPARENCY.POLICY":()=>n("The policies applied to processing of data concerning me"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>n("The cateogories of processing being done on the data the organization has on me"),"TRANSPARENCY.PROVENANCE":()=>n("The sources that the data concerning me come from"),"TRANSPARENCY.PURPOSE":()=>n("The purpose of the processing of the data the organization has on me"),"TRANSPARENCY.RETENTION":()=>n("For how long the data concerning me kept"),"TRANSPARENCY.WHERE":()=>n("Where the data about me is stored"),"TRANSPARENCY.WHO":()=>n("Who can access the data that the organization has on me")},$={"*":()=>n("All provenances"),USER:()=>n("The data is provided by a user of the system (potentially the Data Subject)"),"USER.DATA-SUBJECT":()=>n("The data is provided by the Data Subject"),DERIVED:()=>n("The data is derived from users actions, extracted from other data or inferred"),TRANSFERRED:()=>n("The data is obtained by transfer from another System")},O={"*":()=>n(""),AFFILIATION:()=>n("affiliation"),"AFFILIATION.MEMBERSHIP":()=>n("affiliation membership"),"AFFILIATION.MEMBERSHIP.UNION":()=>n(""),"AFFILIATION.SCHOOL":()=>n(""),"AFFILIATION.WORKPLACE":()=>n(""),BEHAVIOR:()=>n("behavior"),"BEHAVIOR.ACTIVITY":()=>n(""),"BEHAVIOR.CONNECTION":()=>n(""),"BEHAVIOR.PREFERENCE":()=>n(""),"BEHAVIOR.TELEMETRY":()=>n(""),BIOMETRIC:()=>n("biometric"),CONTACT:()=>n("contact"),"CONTACT.EMAIL":()=>n(""),"CONTACT.ADDRESS":()=>n(""),"CONTACT.PHONE":()=>n(""),DEMOGRAPHIC:()=>n("demographic"),"DEMOGRAPHIC.AGE":()=>n(""),"DEMOGRAPHIC.BELIEFS":()=>n(""),"DEMOGRAPHIC.GENDER":()=>n(""),"DEMOGRAPHIC.ORIGIN":()=>n(""),"DEMOGRAPHIC.RACE":()=>n(""),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>n(""),DEVICE:()=>n("device"),FINANCIAL:()=>n("financial"),"FINANCIAL.BANK-ACCOUNT":()=>n("finacial bank account"),GENETIC:()=>n("genetic"),HEALTH:()=>n("health"),IMAGE:()=>n("image"),LOCATION:()=>n("location"),NAME:()=>n("name"),PROFILING:()=>n("profiling"),RELATIONSHIPS:()=>n("relationships"),UID:()=>n("uid"),"UID.ID":()=>n(""),"UID.IP":()=>n(""),"UID.USER-ACCOUNT":()=>n(""),"UID.SOCIAL-MEDIA":()=>n(""),"OTHER-DATA":()=>n("other data")},D={"*":()=>n(i`<b>ALL information related to data processing practices and know if the organization has data on me</b>`),AFFILIATION:()=>n(i`<b>AFFILIATION data:</b> Groups and Organisations I am linked to through work, studies, or membership`),"AFFILIATION.MEMBERSHIP":()=>n(i``),"AFFILIATION.MEMBERSHIP.UNION":()=>n(i``),"AFFILIATION.SCHOOL":()=>n(i``),"AFFILIATION.WORKPLACE":()=>n(i``),BEHAVIOR:()=>n(i`<b>BEHAVIOR data:</b> Data about my behavior`),"BEHAVIOR.ACTIVITY":()=>n(i``),"BEHAVIOR.CONNECTION":()=>n(i``),"BEHAVIOR.PREFERENCE":()=>n(i``),"BEHAVIOR.TELEMETRY":()=>n(i``),BIOMETRIC:()=>n(i`<b>BIOMETRIC data</b>`),CONTACT:()=>n(i`<b>CONTACT data:</b> Data allowing to contact me `),"CONTACT.EMAIL":()=>n(i``),"CONTACT.ADDRESS":()=>n(i``),"CONTACT.PHONE":()=>n(i``),DEMOGRAPHIC:()=>n(i`<b>DEMOGRAPHIC data:</b> All information allowing to class me in a demographic category`),"DEMOGRAPHIC.AGE":()=>n(i``),"DEMOGRAPHIC.BELIEFS":()=>n(i``),"DEMOGRAPHIC.GENDER":()=>n(i``),"DEMOGRAPHIC.ORIGIN":()=>n(i``),"DEMOGRAPHIC.RACE":()=>n(i``),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>n(i``),DEVICE:()=>n(i`<b>DEVICE data:</b> Data about the device I used`),FINANCIAL:()=>n(i`<b>FINANCIAL data:</b> Payment data, financial history and data about my financial situation`),"FINANCIAL.BANK-ACCOUNT":()=>n(i``),GENETIC:()=>n(i`<b>GENETIC data</b>`),HEALTH:()=>n(i`<b>HEALTH data:</b> Data about my health`),IMAGE:()=>n(i`<b>IMAGE data:</b> Any graphic representation (e.g., image, video) of me`),LOCATION:()=>n(i`<b>LOCATION data:</b> Geographic location`),NAME:()=>n(i`<b>NAME data:</b> First names, last names, nicknames, and other names`),PROFILING:()=>n(i`<b>PROFILING data:</b> Any data establishing a degree of similarity of with others (e.g., clusters, user-profiles)`),RELATIONSHIPS:()=>n(i`<b>RELATIONSHIPS data:</b> Data about relationships I have with others, social activity and interaction`),UID:()=>n(i`<b>Unique Identifier data:</b> Any data allowing to uniquely identify me`),"UID.ID":()=>n(i``),"UID.IP":()=>n(i``),"UID.USER-ACCOUNT":()=>n(i``),"UID.SOCIAL-MEDIA":()=>n(i``),"OTHER-DATA":()=>n(i`<b>OTHER-DATA:</b> possibility to specify within a message if needed`)},P={"*":()=>n(i`All targets`),SYSTEM:()=>n(i`This system`),ORGANIZATION:()=>n(i`This system and all systems within this organization`),PARTNERS:()=>n(i`This system, all systems within this organization, and all partners systems where data has been <b>shared or obtained</b>`),"PARTNERS.DOWNWARD":()=>n(i`This system, all systems within this organization, and all partners systems with which data has been <b>shared</b>`),"PARTNERS.UPWARD":()=>n(i`This system, all systems within this organization, and all partners systems from which data has been <b>obtained</b>`)},k={IN_PROCESSING:()=>n(i`In processing`),PARTIALLY_COMPLETED:()=>n(i`Partially completed`),COMPLETED:()=>n(i`Completed`),CANCELED:()=>n(i`Canceled`)},L={GRANTED:()=>n("Granted"),DENIED:()=>n("Denied"),"PARTIALLY-GRANTED":()=>n("Partially Granted"),"UNDER-REVIEW":()=>n("Under Review"),CANCELED:()=>n("Canceled")},_={"NO-LONGER-THAN":()=>n("no longer than"),"NO-LESS-THAN":()=>n("no less than")},M={"CAPTURE-DATE":()=>n("capture date"),"RELATIONSHIP-START":()=>n("relationship start"),"RELATIONSHIP-END":()=>n("relationship end"),"SERVICE-START":()=>n("service start"),"SERVICE-END":()=>n("service end")};var q,Y,G,U;!function(e){e[e.MENU=0]="MENU",e[e.EDIT=1]="EDIT",e[e.REVIEW=2]="REVIEW",e[e.REQUESTS=3]="REQUESTS",e[e.SUBMITTED=4]="SUBMITTED",e[e.STATUS=5]="STATUS",e[e.AUTH=6]="AUTH"}(q||(q={})),function(e){e[e.BUILD=0]="BUILD",e[e.REVIEW=1]="REVIEW",e[e.SENT=2]="SENT"}(Y||(Y={})),function(e){e[e.SELECT_ACTION=0]="SELECT_ACTION",e[e.AUTH=1]="AUTH",e[e.EDIT_OPEN=2]="EDIT_OPEN",e[e.EDIT_COLLAPSED=3]="EDIT_COLLAPSED",e[e.REVIEW=4]="REVIEW"}(G||(G={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.PARTIAL=1]="PARTIAL",e[e.OPEN=2]="OPEN"}(U||(U={}));let H=class extends t{constructor(){super(...arguments),this.demandGroupId="",this.demands=[],this.demand={action:o.ACCESS},this.confirmDelete=!1,this.target=r.PARTNERS,this._action=o.ACCESS}getAccessReviewTemplate(){var e,t,a,s,d,o;const m=null===(t=null===(e=this.demand.restrictions)||void 0===e?void 0:e.date_range)||void 0===t?void 0:t.from,u=null===(s=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===s?void 0:s.to,g=null===(d=this.demand.restrictions)||void 0===d?void 0:d.provenance,b=null===(o=this.demand.restrictions)||void 0===o?void 0:o.privacy_scope;return i` <span>${n("I want to access:")}</span> <ul id="access-review-list" class="review-list"> ${c(b&&Object.values(l).filter((e=>!e.includes(".")&&e!==l.ALL)).every((e=>b.map((e=>e.dc)).includes(e))),(()=>i` <li>${D[l.ALL]()}</li> `),(()=>{var e;return i` ${h(null===(e=this.demand.restrictions)||void 0===e?void 0:e.privacy_scope,(e=>i`<li>${D[e.dc]()}</li> `))} `}))} </ul> ${c(m||u,(()=>i`<p>${this.getDateRangeReviewTemplate(m,u)}</p>`))} ${c((null==g?void 0:g.term)!==p.ALL,(()=>i` <p> ${n("For:")} <b>${$[g.term]()}</b> </p> `))} ${c((null==g?void 0:g.target)!==r.SYSTEM,(()=>i` <p> ${n("From:")} <b>${P[g.target]()}</b> </p> `))} ${c(this.demand.message,(()=>i` <span>${n("Plus additional info:")}</span> <span class="extra-msg-txt"><i>${this.demand.message}</i></span> `))} `}getDeleteReviewTemplate(){var e,t,a,s,d,o;const m=null===(t=null===(e=this.demand.restrictions)||void 0===e?void 0:e.date_range)||void 0===t?void 0:t.from,u=null===(s=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===s?void 0:s.to,g=null===(d=this.demand.restrictions)||void 0===d?void 0:d.provenance,b=null===(o=this.demand.restrictions)||void 0===o?void 0:o.privacy_scope;return i` <span>${n("I want to delete:")}</span> <ul id="delete-review-list" class="review-list"> ${c(b&&Object.values(l).filter((e=>!e.includes(".")&&e!==l.ALL)).every((e=>b.map((e=>e.dc)).includes(e))),(()=>i` <li>${D[l.ALL]()}</li> `),(()=>{var e;return i` ${h(null===(e=this.demand.restrictions)||void 0===e?void 0:e.privacy_scope,(e=>i`<li>${D[e.dc]()}</li> `))} `}))} </ul> ${c(m||u,(()=>i`<p>${this.getDateRangeReviewTemplate(m,u)}</p>`))} ${c((null==g?void 0:g.term)!==p.ALL,(()=>i` <p> ${n("For:")} <b>${$[g.term]()}</b> </p> `))} ${c((null==g?void 0:g.target)!==r.SYSTEM,(()=>i` <p> ${n("From:")} <b>${P[g.target]()}</b> </p> `))} ${c(this.demand.message,(()=>i` <span>${n("Plus additional info:")}</span> <span class="extra-msg-txt"><i>${this.demand.message}</i></span> `))} `}getModifyReviewTemplate(){return i``}getObjectReviewTemplate(){return i``}getPortabilityReviewTemplate(){return i``}getRestrictReviewTemplate(){return i``}getRevokeReviewTemplate(){return i``}getTransparencyReviewTemplate(){var e;const t=null===(e=this.demands[0].restrictions)||void 0===e?void 0:e.provenance;return i` <span>${n("I want to know:")}</span> <ul id="transparency-review-list" class="review-list"> ${h(this.demands,(e=>i` <li><b>${x[e.action]()}</b></li> `))} </ul> ${c((null==t?void 0:t.term)!==p.ALL,(()=>i` <p> ${n("For:")} <b>${$[t.term]()}</b> </p> `))} ${c(this.demands[0].message,(()=>i` <span>${n("Plus additional info:")}</span> <span class="extra-msg-txt"><i>${this.demands[0].message}</i></span> `))} `}getOtherDemandReviewTemplate(){return i``}getDateRangeReviewTemplate(e,t){return e&&t?i`${n("From")} <b>${null==e?void 0:e.toLocaleDateString("en-GB")}</b> to <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b>`:e?i`${n("Since")} <b>${null==e?void 0:e.toLocaleDateString("en-GB")}</b>`:t?i`${n("Up to")} <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b>`:i``}handleEditClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.EDIT,newAction:this.demands[0].action.includes("TRANSPARENCY")?o.TRANSPARENCY:this.demands[0].action,demandGroupId:this.demandGroupId}}))}handleDeleteClick(){this.confirmDelete=!0}handleConfirmDeleteClick(){this.dispatchEvent(new CustomEvent("demand-delete",{bubbles:!0,composed:!0,detail:{demandGroupId:this.demandGroupId}})),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.MENU}}))}handleCancelDeleteClick(){this.confirmDelete=!1}handleTargetClick(e){const{id:t}=e.target;this.target=t,this.dispatchEvent(new CustomEvent("request-target-change",{bubbles:!0,composed:!0,detail:{id:t}}))}handleSubmitClick(){this.dispatchEvent(new Event("submit-request",{bubbles:!0,composed:!0}))}willUpdate(e){e.has("demands")&&this.demands.length>0&&(this._action=this.demands[0].action,this._action.includes("TRANSPARENCY")?this._action=o.TRANSPARENCY:[this.demand]=this.demands)}render(){return i`
      <span><b>${n("My demand(s):")}</b></span>
      
      <div class="dmd-review-ctr light-border">
        <div id="review-heading-row">
          <span id="review-action-heading"><b>${S[this._action]()} demand</b></span>
          <div id="review-btns">
            <button class='svg-btn' @click=${this.handleEditClick}>
              <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m19.3 8.925-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Z"/></svg>
            </button>
            <button class='svg-btn' @click=${this.handleDeleteClick}>
              <svg viewBox="0 0 30 30" width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M26.25 2.8125H3.75C2.71447 2.8125 1.875 3.65197 1.875 4.6875V5.625C1.875 6.66053 2.71447 7.5 3.75 7.5H26.25C27.2855 7.5 28.125 6.66053 28.125 5.625V4.6875C28.125 3.65197 27.2855 2.8125 26.25 2.8125Z" fill="black"/>
                <path d="M4.36191 9.37501C4.29603 9.37465 4.23083 9.38818 4.17054 9.41472C4.11024 9.44126 4.05622 9.48021 4.01199 9.52902C3.96777 9.57784 3.93432 9.63543 3.91385 9.69804C3.89337 9.76065 3.88632 9.82687 3.89316 9.89239L5.43476 24.6908C5.43444 24.6951 5.43444 24.6994 5.43476 24.7037C5.51531 25.3882 5.84437 26.0193 6.35949 26.4771C6.8746 26.935 7.5399 27.1878 8.22909 27.1875H21.7695C22.4585 27.1875 23.1235 26.9346 23.6384 26.4767C24.1533 26.0189 24.4822 25.388 24.5627 24.7037V24.6914L26.102 9.89239C26.1088 9.82687 26.1017 9.76065 26.0813 9.69804C26.0608 9.63543 26.0273 9.57784 25.9831 9.52902C25.9389 9.48021 25.8849 9.44126 25.8246 9.41472C25.7643 9.38818 25.6991 9.37465 25.6332 9.37501H4.36191ZM18.9436 19.9623C19.0327 20.0489 19.1037 20.1524 19.1525 20.2666C19.2013 20.3809 19.2268 20.5038 19.2277 20.6281C19.2286 20.7523 19.2048 20.8755 19.1576 20.9905C19.1105 21.1055 19.0409 21.2099 18.953 21.2978C18.8651 21.3856 18.7606 21.4551 18.6457 21.5022C18.5307 21.5493 18.4075 21.5731 18.2832 21.5722C18.1589 21.5712 18.0361 21.5456 17.9218 21.4968C17.8076 21.4479 17.7041 21.3769 17.6176 21.2877L14.9996 18.6697L12.3811 21.2877C12.2044 21.4593 11.9674 21.5545 11.7211 21.5528C11.4748 21.551 11.2392 21.4525 11.065 21.2784C10.8908 21.1043 10.7921 20.8686 10.7903 20.6224C10.7884 20.3761 10.8835 20.139 11.0551 19.9623L13.6736 17.3438L11.0551 14.7252C10.8835 14.5485 10.7884 14.3114 10.7903 14.0651C10.7921 13.8189 10.8908 13.5832 11.065 13.4091C11.2392 13.235 11.4748 13.1365 11.7211 13.1347C11.9674 13.133 12.2044 13.2282 12.3811 13.3998L14.9996 16.0178L17.6176 13.3998C17.7942 13.2282 18.0313 13.133 18.2775 13.1347C18.5238 13.1365 18.7595 13.235 18.9336 13.4091C19.1078 13.5832 19.2065 13.8189 19.2084 14.0651C19.2102 14.3114 19.1151 14.5485 18.9436 14.7252L16.325 17.3438L18.9436 19.9623Z" fill="black"/>
              </svg>
            </button>
          </div>
        </div>
        <div id="review-content">
          ${m(this._action,[[o.ACCESS,()=>this.getAccessReviewTemplate()],[o.DELETE,()=>this.getDeleteReviewTemplate()],[o.MODIFY,()=>this.getModifyReviewTemplate()],[o.OBJECT,()=>this.getObjectReviewTemplate()],[o.PORTABILITY,()=>this.getPortabilityReviewTemplate()],[o.RESTRICT,()=>this.getRestrictReviewTemplate()],[o.REVOKE,()=>this.getRevokeReviewTemplate()],[o.TRANSPARENCY,()=>this.getTransparencyReviewTemplate()],[o["OTHER.DEMAND"],()=>this.getOtherDemandReviewTemplate()]])}
        </div>
        ${c(this.confirmDelete,(()=>i` <div id="delete-confirm-popup" class="no-line-border"> <span class="popup-txt">${n("You are about to remove a demand")}</span> <span class="popup-txt">${n(i`Do you confirm <b>deleting this demand</b>?`)}</span> <div id="popup-btns-ctr"> <button id="confirm-delete-btn" class="curve-btn popup-btn" @click="${this.handleConfirmDeleteClick}"> ${n("Delete")} </button> <button id="cancel-delete-btn" class="curve-btn popup-btn" @click="${this.handleCancelDeleteClick}"> ${n("Cancel")} </button> </div> </div> `))}
        </div>

      </div>
      <!-- Uncomment when supporting multiple demands -->
      <!-- <div id="new-dmd-ctr" class="medium-border">
        <span><b>${n("I want to add another demand")}</b></span>
        <button class="svg-btn">
          <img src="packages/prci/src/assets/icons/add-circle.svg" alt="add icon"></img>
        </button>
      </div> -->
      <!-- Submit button -->
      <slotted-dropdown
        header=${n("Privacy Request Advanced settings")}
        include-buttons
      >
        <div>
          <span> ${n("I address my Privacy Request to:")} </span>
          <fieldset class="provenance-restriction">
            ${Object.values(r).filter((e=>e!==r.ALL)).map((e=>i` <input id="${e}" name="provenance-target" type="radio" ?checked="${this.target===e}" @click="${this.handleTargetClick}">  <label for="${e}">${P[e]()}</label><br> `))}
          </fieldset>
        </div>
      </slotted-dropdown>
      <button
        id="submit-btn"
        class="nav-btn ctr-btn  animated-btn"
        @click=${this.handleSubmitClick}
      >
        ${n("Submit Privacy Request")}
      </button>
    `}};H.styles=[y,w,N,e`:host{display:grid;row-gap:20px}:host([confirm-delete]) .dmd-review-ctr{background:#c4c4c4;opacity:.7}#review-heading-row{display:grid;grid-area:1/1/2/2;grid-template-columns:repeat(2,1fr);z-index:2}.dmd-review-ctr{display:grid;row-gap:20px;padding:40px}#review-btns{display:flex;flex-direction:row;justify-content:flex-end;column-gap:20px}.review-btn{width:24px;height:24px}#review-content{display:grid;grid-area:2/1/3/2;row-gap:20px;z-index:1}.extra-msg-txt{padding:0 0 0 20px}.review-list li:not(:last-child){margin:0 0 20px 0}.review-list{margin:0}#delete-confirm-popup{display:grid;row-gap:20px;background:#fff;padding:40px;z-index:2;grid-area:1/1/3/2;justify-self:center;align-self:center;width:40%;height:150px}.popup-txt{text-align:center}#popup-btns-ctr{display:flex;column-gap:50px;justify-content:center}.popup-btn{min-width:30%;max-width:200px;font-size:18px}#confirm-delete-btn{background:red;color:#fff;border:none}#cancel-delete-btn{background:#fff;color:#000;border:2px solid #18a0fb}#submit-btn{transform:translateY(35px)}`],v([s({attribute:!1})],H.prototype,"demandGroupId",void 0),v([s({attribute:!1})],H.prototype,"demands",void 0),v([s({attribute:!1})],H.prototype,"demand",void 0),v([s({type:Boolean,reflect:!0,attribute:"confirm-delete"})],H.prototype,"confirmDelete",void 0),v([s({attribute:!1})],H.prototype,"target",void 0),v([d()],H.prototype,"_action",void 0),H=v([a("review-view")],H);let B=class extends t{constructor(){super(...arguments),this.action=o.ACCESS,this.disabled=!1}handleClick(){const e=new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.EDIT,newAction:this.action}});this.dispatchEvent(e)}render(){return i` <button class="action-button animated-btn" @click="${this.handleClick}" ?disabled="${this.disabled}"> <strong>${S[this.action]()}:</strong> ${x[this.action]()} </button> `}};B.styles=[w,e`:host button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16px}.action-button{border-radius:15px;border:.5px solid #5b5b5b;background-color:#fafafa;padding:10px 40px;height:120px;width:100%;max-width:400px;text-align:left;overflow:hidden;text-overflow:ellipsis}.btn-txt{overflow:hidden}.bolder{font-weight:700}`],v([s({attribute:!1})],B.prototype,"action",void 0),v([s({type:Boolean})],B.prototype,"disabled",void 0),B=v([a("action-item"),f()],B);const F=new Map([[o.ACCESS,!0],[o.DELETE,!0],[o.MODIFY,!1],[o.OBJECT,!1],[o.PORTABILITY,!1],[o.RESTRICT,!1],[o.REVOKE,!1],[o.TRANSPARENCY,!0],[o["TRANSPARENCY.DATA.CATEGORIES"],!0],[o["TRANSPARENCY.DPO"],!0],[o["TRANSPARENCY.KNOWN"],!0],[o["TRANSPARENCY.LEGAL.BASES"],!0],[o["TRANSPARENCY.ORGANIZATION"],!0],[o["TRANSPARENCY.POLICY"],!0],[o["TRANSPARENCY.PROCESSING.CATEGORIES"],!0],[o["TRANSPARENCY.PURPOSE"],!0],[o["TRANSPARENCY.PROVENANCE"],!0],[o["TRANSPARENCY.RETENTION"],!0],[o["TRANSPARENCY.WHERE"],!0],[o["TRANSPARENCY.WHO"],!0],[o["OTHER.DEMAND"],!0]]),j={"access-allowed-data-categories":[l.RELATIONSHIPS,l.AFFILIATION,l.BEHAVIOR,l.BIOMETRIC,l.CONTACT,l.DEMOGRAPHIC,l.DEVICE,l.FINANCIAL,l.GENETIC,l.HEALTH,l.IMAGE,l.LOCATION,l.NAME,l.PROFILING,l.UID]};let V=class extends t{constructor(){super(...arguments),this.prompt="Type of demand I want to submit:",this.includedActions=[]}handleRequestsClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.REQUESTS}}))}render(){return i` <div class="view-ctr medium-border"> <div class="prompt-heading"><b>${this.prompt}</b></div> <div class="actions-container"> ${this.includedActions.filter((e=>e!==o["OTHER.DEMAND"])).map((e=>i`<action-item .action="${e}" ?disabled="${!F.get(e)}"></action-item>`))} </div> </div> <div id="below-menu-btns-ctr"> <button id="other-dmd-btn" class="link-btn medium-font underline"> ${n("Click here if you want to make some other demand (please note that it might take longer to be answered)")} </button> <button id="requests-btn" class="curve-btn medium-border animated-btn" @click="${this.handleRequestsClick}"> <span>${n("Access my submitted Privacy Requests")}</span> <svg width="15" height="26" viewBox="0 0 15 26" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M0.923975 1.06753C0.572467 1.41914 0.375 1.89597 0.375 2.39315C0.375 2.89034 0.572467 3.36716 0.923975 3.71878L10.2052 13L0.923975 22.2813C0.582428 22.6349 0.393438 23.1085 0.39771 23.6002C0.401982 24.0918 0.599175 24.562 0.946815 24.9097C1.29445 25.2573 1.76473 25.4545 2.25635 25.4588C2.74797 25.4631 3.22159 25.2741 3.57522 24.9325L14.1821 14.3257C14.5336 13.974 14.7311 13.4972 14.7311 13C14.7311 12.5028 14.5336 12.026 14.1821 11.6744L3.57522 1.06753C3.22361 0.716021 2.74678 0.518555 2.2496 0.518555C1.75242 0.518555 1.27559 0.716021 0.923975 1.06753Z" fill="black"/> </svg> </button> </div> `}};function z(e){if(e.demands.length>1)return"code=200, example=TRANSPARENCY Multi-Response";if(1===e.demands.length){const{action:t}=e.demands[0];return`code=200, example=${t} Response`}return"code=400"}async function W(e,t=!0){const i=function(e){const t=Object.values(l).filter((e=>e!==l.ALL&&!e.includes(".")));return e.demands.forEach((e=>{if(e.restrictions&&e.restrictions.privacy_scope){const i=e.restrictions.privacy_scope.map((e=>e.dc));t.every((e=>i.includes(e)))&&delete e.restrictions.privacy_scope}})),e}(e),a=t?"https://stoplight.io/mocks/blindnet/product-management:open-api/74767654/privacy-request":"https://devkit-pce-staging.azurewebsites.net/v0/privacy-request",n=t?{"Content-Type":"application/json",Prefer:z(e)}:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"};return fetch(a,{method:"POST",headers:n,body:JSON.stringify(i)}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}V.styles=[N,y,w,e`.actions-container{display:grid;grid-template-columns:repeat(3,1fr);gap:50px}.prompt-heading{font-size:16px;text-align:left;padding:0;margin:0 0 35px 0}#other-dmd-btn{margin:20px 0 0 0;justify-self:right}#below-menu-btns-ctr{display:grid;row-gap:50px;max-width:1170px}#requests-btn{display:flex;justify-content:center;justify-self:center;align-items:center;column-gap:20px;background:0 0;padding:20px;width:35%;font-size:18px;border-radius:15px}#requests-btn img{float:right}`],v([s({type:String})],V.prototype,"prompt",void 0),v([s({attribute:!1})],V.prototype,"includedActions",void 0),V=v([f(),a("action-menu")],V);let Z=class extends t{constructor(){super(),this._requests=[],async function(){return fetch("https://devkit-pce-staging.azurewebsites.net/v0/privacy-request/history",{method:"GET",headers:{accept:"application/json"}}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}().then((e=>{this._requests=e.history}))}handleRequestClick(e){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.STATUS,requestId:e.target.id}}))}handleNewRequestClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.MENU}}))}render(){return i` <div id="table-ctr"> <div id="requests-list"> <div class="list-header-ctr"> <span class="list-header"><b>${n("Created")}</b></span> <span class="list-header"><b>${n("Status")}</b></span> <span class="list-header"><b>${n("Demands")}</b></span> <span></span> </div> ${h(this._requests,(e=>i` <div class="list-item-ctr"> <span class="list-item">${new Date(e.date).toLocaleDateString("en-gb")}</span> <span class="list-item">${k[e.status]()}</span> <span class="list-item">${e.demands}</span> <button id="${e.id}" class="link-btn dark-font underline list-item" @click="${this.handleRequestClick}"> ${n("See Details")} </button> </div> `))} </div> </div> <div id="new-request-ctr"> <button id="new-request-btn" class="link-btn dark-font underline" @click="${this.handleNewRequestClick}"> ${n("Submit a new Privacy Request")} </button> </div> `}};function K(){return Object.values(o).filter((e=>!e.includes("TRANSPARENCY.")))}Z.styles=[y,w,N,e`:host{display:grid;max-width:600px;margin:auto;row-gap:40px;justify-items:center}#table-ctr{width:100%}#requests-list{display:grid;row-gap:30px}.list-header-ctr{display:grid;grid-template-columns:repeat(4,1fr);text-align:center}.list-item-ctr{display:grid;grid-template-columns:repeat(4,1fr);padding:20px 0;border:2px solid #5b5b5b;border-radius:10px;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.list-item{display:inline-flex;justify-items:center;text-align:center;justify-self:center;align-items:center}.list-item:last-child{padding:0 20px 0 0}#new-request-btn{font-size:18px}`],v([d()],Z.prototype,"_requests",void 0),Z=v([a("requests-view")],Z);let J=class extends t{constructor(){super(...arguments),this.demand={demand_id:"",date:"",requested_action:o.ACCESS,status:b.GRANTED,includes:[],system:""},this.demands=[],this.open=!1}accessResponseTemplate(e){return i` ${c([b.GRANTED,b["PARTIALLY-GRANTED"]].includes(e.status),(()=>e.data?i` <div> ${n(i`Click <a href="${e.data}.json">here</a> to download your data.`)} </div> `:i`${n("Obtaining data, please wait and refresh the page later.")}`))} `}deleteResponseTemplate(){return i``}transparencyResponseTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${e.answer} `}transparencyDcTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(e.answer,(e=>i` ${e}<br> `))} `}transparencyDpoTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${e.answer} `}transparencyKnownTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${e.answer} `}transparencyLbTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(e.answer,(e=>i` Type: ${e.lb_type}<br> Name: ${e.name}<br> Description: ${e.description}<br><br> `))} `}transparencyOrgTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${e.answer} `}transparencyPolicyTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${e.answer} `}transparencyPcTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(e.answer,(e=>i` ${e}<br> `))} `}transparencyProvTemplate(e){const t=e.answer;return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(t["AFFILIATION.selector_1"],(e=>i` Provenance: ${e.provenance}<br> System: ${e.system}<br><br> `))} ${h(t["AFFILIATION.MEMBERSHIP.selector_2"],(e=>i` Provenance: ${e.provenance}<br> System: ${e.system}<br><br> `))} ${h(t["FINANCIAL.BANK-ACCOUNT.selector_3"],(e=>i` Provenance: ${e.provenance}<br> System: ${e.system}<br><br> `))} `}transparencyPurposeTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(e.answer,(e=>i` ${e}<br> `))} `}transparencyRetTemplate(e){console.log(e);const t=e.answer;return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(t.NAME,(e=>{return i`<p> ${t=l.NAME,a=e.policy_type,n=e.duration,s=e.after,i`<i>${O[t]().toLocaleUpperCase()}</i> data is kept <i>${_[a]().toLocaleUpperCase()}</i> <i>${n}</i> months after <i>${M[s]().toLocaleUpperCase()}</i>`} </p>`;var t,a,n,s}))} `}transparencyWhereTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(e.answer,(e=>i` ${e}<br> `))} `}transparencyWhoTemplate(e){return i` <p> <b>Requested info:</b> ${x[e.requested_action]()} </p> ${h(e.answer,(e=>i` ${e}<br> `))} `}render(){return i` <div class="demand-status-ctr ${this.demand.status.toLowerCase()}-dmd medium-border"> <span class="status-type-ctr"><b>${this.demand.status}</b></span> <div class="dmd-action-ctr ${this.open?"":"round-bottom"}"> <p class="action-title"> <b>${S[this.demand.requested_action]()} ${n("Demand")}</b> </p> ${c([b.GRANTED,b["PARTIALLY-GRANTED"],b.DENIED].includes(this.demand.status),(()=>i` <button class="status-btn ${this.demand.status.toLowerCase()}-${this.open?"open":"closed"}-btn details-btn curve-btn animated-btn" @click="${()=>{this.open=!this.open}}"> ${n("Details")} </button> `))} ${c(this.demand.status===b["UNDER-REVIEW"],(()=>i` <button class="status-btn cancel-btn curve-btn animated-btn" @click="${()=>{this.open=!this.open}}"> ${n("Cancel Demand")} </button> `))} </div> ${c(this.open,(()=>i` <div id="${this.demand.demand_id}-details-ctr" class="dmd-details-ctr round-bottom"> <b>Your demand has been ${L[this.demand.status]().toLocaleLowerCase()}.</b> ${m(this.demand.requested_action,[[o.ACCESS,()=>this.accessResponseTemplate(this.demand)],[o.TRANSPARENCY,()=>this.transparencyResponseTemplate(this.demand)],[o["TRANSPARENCY.DATA.CATEGORIES"],()=>this.transparencyDcTemplate(this.demand)],[o["TRANSPARENCY.DPO"],()=>this.transparencyDpoTemplate(this.demand)],[o["TRANSPARENCY.KNOWN"],()=>this.transparencyKnownTemplate(this.demand)],[o["TRANSPARENCY.LEGAL.BASES"],()=>this.transparencyLbTemplate(this.demand)],[o["TRANSPARENCY.ORGANIZATION"],()=>this.transparencyOrgTemplate(this.demand)],[o["TRANSPARENCY.POLICY"],()=>this.transparencyPolicyTemplate(this.demand)],[o["TRANSPARENCY.PROCESSING.CATEGORIES"],()=>this.transparencyPcTemplate(this.demand)],[o["TRANSPARENCY.PROVENANCE"],()=>this.transparencyProvTemplate(this.demand)],[o["TRANSPARENCY.PURPOSE"],()=>this.transparencyPurposeTemplate(this.demand)],[o["TRANSPARENCY.RETENTION"],()=>this.transparencyRetTemplate(this.demand)],[o["TRANSPARENCY.WHERE"],()=>this.transparencyWhereTemplate(this.demand)],[o["TRANSPARENCY.WHO"],()=>this.transparencyWhoTemplate(this.demand)]])} ${c(this.demand.message,(()=>i` <p>Included message:</p> <i>${this.demand.message}</i> `))} </div> `))} </div> `}};J.styles=[y,w,e`.demand-status-ctr{display:flex;flex-direction:column;border-radius:15px;border:2px solid #e6e6e6;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.status-type-ctr{font-size:16px}.demand-status-ctr span{padding:10px 0}.dmd-action-ctr{display:grid;grid-template-columns:repeat(2,1fr);align-items:center;justify-items:center;column-gap:20px;padding:20px 20px;background:#fff}.granted-dmd{background-color:#51d214;border-color:#51d214}.granted-dmd button{border:2px solid #51d214}:host([open]) .granted-dmd button{background-color:#51d214}.denied-dmd{background-color:#f90707;border-color:#f90707}.denied-dmd button{border:2px solid #f90707}:host([open]) .denied-dmd button{background-color:#f90707}.partially-granted-dmd{background-color:#ff7a00;border-color:#ff7a00}.partially-granted-dmd button{border:2px solid #ff7a00}:host([open]) .partially-granted-dmd button{background-color:#ff7a00}:host([open]) .details-btn{color:#fff}.status-btn{background:0 0;padding:10px 40px;justify-self:center;align-self:flex-end;float:right;font-size:16px;font-weight:700}.details-btn{background-color:#fff;color:#000}.cancel-btn{border:2px solid #f90707}.round-bottom{border-bottom-left-radius:15px;border-bottom-right-radius:15px}.granted-dmd span{color:#fff}.denied-dmd span{color:#fff}.partially-granted-dmd span{color:#fff}.under-review-dmd{background-color:#e6e6e6;border-color:#e6e6e6}.cancelled-dmd{background-color:#ffc1bd;border-color:#ffc1bd}.action-title{justify-self:center}.dmd-details-ctr{display:grid;background-color:#fff;row-gap:20px;padding:10px 20px 30px 20px}p{margin:0;padding:0}`],v([s({attribute:!1})],J.prototype,"demand",void 0),v([s({attribute:!1})],J.prototype,"demands",void 0),v([s({type:Boolean,reflect:!0})],J.prototype,"open",void 0),J=v([a("status-view-item")],J);let Q=class extends t{constructor(){super(...arguments),this.requestId="",this._requestDate=new Date,this._completedDemands=[],this._processingDemands=[],this._cancelledDemands=[],this._intervalId=void 0}reloadRequest(){(async function(e){return fetch(`https://devkit-pce-staging.azurewebsites.net/v0/privacy-request/${e}`,{method:"GET",headers:{accept:"application/json"}}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))})(this.requestId).then((e=>{e.length>0&&(this._requestDate=new Date(e[0].date),this._completedDemands=e.filter((e=>[b.GRANTED,b["PARTIALLY-GRANTED"],b.DENIED].includes(e.status))),this._processingDemands=e.filter((e=>e.status===b["UNDER-REVIEW"])),this._cancelledDemands=e.filter((e=>e.status===b.CANCELED))),0===this._processingDemands.length&&this._intervalId&&!this._completedDemands.some((e=>e.requested_action===o.ACCESS&&!e.data))?(clearInterval(this._intervalId),this._intervalId=void 0):this._intervalId||0===this._processingDemands.length||(this._intervalId=setInterval((()=>this.reloadRequest()),3e3))}))}willUpdate(e){e.has("requestId")&&""!==this.requestId&&this.reloadRequest()}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.REQUESTS}}))}handleNewRequestClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.MENU}}))}render(){return i` ${c(this._processingDemands.length>0,(()=>i` <p> ${n(i`Your Privacy Request, sent on ${this._requestDate.toLocaleDateString("en-gb")}, is currently being processed.`)} </p> ${c(this._completedDemands.length>0,(()=>i` <div class="req-progress-ctr"> <p>${n("At the moment:")}</p> <p> <b>${n(i`${this._completedDemands.length} demand(s) have been completed${c(this._cancelledDemands.length>0,(()=>i` and ${this._cancelledDemands.length} demand(s) have been cancelled`))}`)}</b> </p> <p> ${n(i`${this._processingDemands.length} demand(s) are being processed`)} </p> </div> `))} `),(()=>i` <p> ${n(i`Your Privacy Request, sent on ${this._requestDate.toLocaleDateString("en-gb")}, has been processed.`)} </p> `))} ${c(this._completedDemands.length>0,(()=>i` <div id="completed-dmds-ctr" class="dmds-ctr medium-border"> <span><b>${n("Completed Demand(s)")}</b></span> ${h(this._completedDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))} </div> `))} ${c(this._processingDemands.length>0,(()=>i` <div id="processing-dmds-ctr" class="dmds-ctr medium-border"> <span><b>${n("Processing Demand(s)")}</b></span> ${h(this._processingDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))} </div> `))} ${c(this._cancelledDemands.length>0,(()=>i` <div id="cancelled-dmds-ctr" class="dmds-ctr medium-border"> <span><b>${n("Cancelled Demand(s)")}</b></span> ${h(this._cancelledDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))} </div> `))} <div id="nav-btns-ctr"> <button class="status-nav-btn link-btn dark-font underline" @click="${this.handleBackClick}"> ${n("Back to my Requests")} </button> <button class="status-nav-btn link-btn dark-font underline" @click="${this.handleNewRequestClick}"> ${n("Submit a new Privacy Request")} </button> </div> `}};Q.styles=[y,w,N,e`:host{display:grid;row-gap:40px;max-width:900px;text-align:center;margin:auto}.req-progress-ctr{display:grid;row-gap:10px}.dmds-ctr{display:grid;row-gap:20px;padding:30px 40px 40px 40px}.dmds-ctr span{padding:0 0 20px 0}#completed-dmds-ctr{border:1px solid #18a0fb;background:rgba(24,160,251,.11)}#nav-btns-ctr{display:flex;column-gap:20px;justify-content:center;justify-items:center}.status-nav-btn{font-size:18px}p{margin:0;padding:0}`],v([s({type:String,attribute:"request-id"})],Q.prototype,"requestId",void 0),v([d()],Q.prototype,"_requestDate",void 0),v([d()],Q.prototype,"_completedDemands",void 0),v([d()],Q.prototype,"_processingDemands",void 0),v([d()],Q.prototype,"_cancelledDemands",void 0),v([d()],Q.prototype,"_intervalId",void 0),Q=v([a("status-view")],Q);class X extends t{constructor(){super(...arguments),this.demandState=G.EDIT_OPEN,this.demandGroupId=self.crypto.randomUUID(),this.demands=[]}setDemand(e){this.demands.push(e)}deleteDemand(e){this.demands.splice(this.demands.findIndex((t=>t.action===e)),1)}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set-multiple",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demands:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.MENU}}))}handleAddClick(){this.validate()&&(this.addToPrivacyRequest(this.demandGroupId,this.demands),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.REVIEW}})))}render(){return i` ${m(this.demandState,[[G.EDIT_OPEN,()=>this.getEditTemplate(this.demands)]])} <div class="btns-ctr"> <button id="back-btn" class="nav-btn ctr-btn animated-btn" @click="${this.handleBackClick}"> ${n("Back")} </button> <button id="add-btn" class="nav-btn ctr-btn animated-btn" @click="${this.handleAddClick}"> ${n("Add demand to Privacy Request")} </button> </div> `}}X.styles=[w,e`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:80%;max-width:375px}#add-btn{grid-column:3/4;min-width:80%;max-width:375px}`],v([s({type:Number,attribute:"demand-state"})],X.prototype,"demandState",void 0),v([s({type:String})],X.prototype,"demandGroupId",void 0),v([s({attribute:!1})],X.prototype,"demands",void 0);let ee=class extends t{constructor(){super(...arguments),this.header="",this.includeButtons=!1,this.dropdownState=U.CLOSED}handleButtonClick(){this.dropdownState===U.CLOSED||this.dropdownState===U.PARTIAL?this.dropdownState=U.OPEN:this.dropdownState=U.CLOSED}render(){return i` ${c(this.header,(()=>i` <button class="header link-btn" @click="${this.handleButtonClick}"> <span class="medium-font underline">${this.header}</span> ${c(this.dropdownState===U.OPEN,(()=>i` <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"> <path d="m7.4 15.375-1.4-1.4 6-6 6 6-1.4 1.4-4.6-4.6Z"/> </svg> `),(()=>i` <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"> <path d="m12 15.375-6-6 1.4-1.4 4.6 4.6 4.6-4.6 1.4 1.4Z"/> </svg> `))} <simple-icon icon="expand-${this.dropdownState===U.OPEN?"less":"more"}"> </simple-icon> </button> `))} <div class="light-border dropdown"> <div class="content-ctr"> <slot name="prompt"></slot> <slot></slot> </div> ${c(this.includeButtons,(()=>i` <div class="close-btn-ctr"> <button class="svg-btn" @click="${this.handleButtonClick}"> ${c(this.dropdownState===U.PARTIAL,(()=>i` <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"> <path d="m12 15.375-6-6 1.4-1.4 4.6 4.6 4.6-4.6 1.4 1.4Z"/> </svg> `),(()=>i` <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"> <path d="m7.4 15.375-1.4-1.4 6-6 6 6-1.4 1.4-4.6-4.6Z"/> </svg> `))} </button> </div> `))} </div> `}};var te;ee.styles=[y,w,N,I,e`.content-ctr{display:none}:host([dropdown-state='2']) .content-ctr{display:grid;row-gap:50px}.dropdown{padding:40px 40px 20px 40px}:host([dropdown-state='0']) .dropdown{display:none}:host([dropdown-state='2']) .header{margin:0 0 20px 0}:host([dropdown-state='2']) .dropdown-btn-img{src:'packages/prci/src/assets/icons/close_container_arrow.svg'}.close-btn-ctr{margin:20px 0 0 0;text-align:center}`],v([s({type:String})],ee.prototype,"header",void 0),v([s({type:Boolean,attribute:"include-buttons"})],ee.prototype,"includeButtons",void 0),v([s({type:Number,reflect:!0,attribute:"dropdown-state"})],ee.prototype,"dropdownState",void 0),ee=v([a("slotted-dropdown")],ee),function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME",e[e.NONE=2]="NONE"}(te||(te={}));let ie=class extends t{constructor(){super(...arguments),this.choices=[],this.selectionState=te.ALL,this.componentMode=U.CLOSED,this.includeAll=!0,this.allChecked=!0,this.allMessage=n("Select all"),this.eventPrefix="checklist-click",this.includeButtons=!1,this.includeOther=!1,this.selectedChoices=new Set}selectChoice(e){this.selectedChoices.add(e);const t=new CustomEvent(`${this.eventPrefix}-select`,{bubbles:!0,composed:!0,detail:{id:e,"first-selection":1===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}deleteChoice(e){this.selectedChoices.delete(e);const t=new CustomEvent(`${this.eventPrefix}-deselect`,{bubbles:!0,composed:!0,detail:{id:e,"none-selected":0===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}handleChoiceClick(e){var t,i,a;const{id:n,checked:s}=e.target;if("all-checkbox"===n){const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll(".choice-checkbox");s?(this.allChecked=!0,null==e||e.forEach((e=>{const t=e;t.checked||(t.checked=!0,this.selectChoice(t.id))}))):(this.allChecked=!1,null==e||e.forEach((e=>{const t=e;t.checked&&(t.checked=!1,this.deleteChoice(t.id))})))}else if(s){this.selectChoice(n);(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("all-checkbox")).checked=!0}else if(this.deleteChoice(n),0===this.selectedChoices.size){(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("all-checkbox")).checked=!1}}handleOtherClick(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-click`,{bubbles:!0,composed:!0,detail:{checked:e.target.checked}}))}handleOtherInput(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-input`,{bubbles:!0,composed:!0,detail:{text:e.target.value}}))}updateSelectionState(){switch(this.selectedChoices.size){case 0:this.selectionState=te.NONE;break;case this.choices.length:this.selectionState=te.ALL;break;default:this.selectionState=te.SOME}}getDisplayChoices(){switch(this.componentMode){case U.CLOSED:return[];case U.OPEN:return Array.from(this.choices);case U.PARTIAL:return Array.from(this.choices).filter((e=>this.selectedChoices.has(e.id)));default:return[]}}handleButtonClick(){this.componentMode===U.CLOSED||this.componentMode===U.PARTIAL?this.componentMode=U.OPEN:this.componentMode=U.CLOSED}willUpdate(e){e.has("choices")&&(this.choices.forEach((e=>{e.checked&&this.selectedChoices.add(e.id)})),this.updateSelectionState())}render(){return i` <div class="choices-list"> ${c(this.includeAll&&!(this.componentMode===U.PARTIAL&&this.selectionState===te.SOME),(()=>i` <div class="all-ctr"> <input id="all-checkbox" type="checkbox" @click="${this.handleChoiceClick}" ?checked="${this.allChecked}"> <label for="all-checkbox"> ${m(this.selectionState,[[te.NONE,()=>i` <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="0.5" y="0.5" width="12" height="12" rx="1.5" stroke="#414040"/> </svg> `],[te.SOME,()=>i` <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect width="13" height="13" rx="2" fill="#377CFD"/> <line x1="2.5" y1="6.5" x2="10.5" y2="6.5" stroke="white" stroke-width="2"/> </svg> `],[te.ALL,()=>i` <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect width="13" height="13" rx="2" fill="#377CFD"/> <path d="M4.875 8.75876L2.61625 6.50001L1.84708 7.26376L4.875 10.2917L11.375 3.79167L10.6113 3.02792L4.875 8.75876Z" fill="white" stroke="white"/> </svg> `]])} </label> <span class="all-prefix">${this.allMessage}</span> </div> `))} ${this.getDisplayChoices().map((e=>i` <div class="choice-ctr"> <input id="${e.id}" class="choice-checkbox" type="checkbox" ?checked="${e.checked}" ?disabled="${e.disabled}" @change="${this.handleChoiceClick}"> <label>${e.description}</label> </div> `))} ${c(this.includeOther&&this.componentMode===U.OPEN,(()=>i` <div id="other-data-ctr"> <div class="choice-ctr"> <input id="other-checkbox" type="checkbox" @change="${this.handleOtherClick}"> <label>${n(i`<b>OTHER-DATA:</b> Specify another type of data`)}</label> </div> <div id="other-data-input-ctr"> <span>${n("Other data type:")}</span> <input id="other-data-input" type="text" class="std-txt-input"> </div> </div> `))} </div> ${c(this.includeButtons,(()=>i` <button class="svg-btn" @click="${this.handleButtonClick}"> ${c(this.componentMode===U.OPEN,(()=>i` <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"> <path d="m7.4 15.375-1.4-1.4 6-6 6 6-1.4 1.4-4.6-4.6Z"/> </svg> `),(()=>i` <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"> <path d="m12 15.375-6-6 1.4-1.4 4.6 4.6 4.6-4.6 1.4 1.4Z"/> </svg> `))} </button> `))} `}};ie.styles=[y,N,w,e`:host{display:grid}:host([selection-state='0']) .choice-checkbox{opacity:.5}:host([selection-state='0']) #all-checkbox:checked+label{opacity:1}:host([selection-state='1']) #all-checkbox+label{opacity:1}:host([selection-state='2']) .choice-checkbox{opacity:1}.choices-list{display:grid;overflow:hidden;grid-template-columns:1fr;row-gap:35px;padding:35px 0 25px 0}.choice-ctr{padding:0 30px}.all-ctr{display:flex;align-items:center;padding:0 30px}.all-prefix{padding:0 0 0 4px}#all-checkbox{display:none}#all-checkbox+label{height:13px;width:13px;display:inline-block;margin:3px 3px 3px 4px}#other-data-input-ctr{display:flex;column-gap:5px;padding:20px 55px;align-items:center}#other-data-input input{height:30px;width:100%}#other-data-input span{flex-shrink:0}`],v([s({type:Array})],ie.prototype,"choices",void 0),v([s({type:Number,reflect:!0,attribute:"selection-state"})],ie.prototype,"selectionState",void 0),v([s({type:Number,reflect:!0,attribute:"component-mode"})],ie.prototype,"componentMode",void 0),v([s({type:Boolean})],ie.prototype,"includeAll",void 0),v([s({type:Boolean,reflect:!0})],ie.prototype,"allChecked",void 0),v([s({type:String,attribute:"all-message"})],ie.prototype,"allMessage",void 0),v([s({type:String,attribute:"event-prefix"})],ie.prototype,"eventPrefix",void 0),v([s({type:Boolean,attribute:"include-buttons"})],ie.prototype,"includeButtons",void 0),v([s({type:Boolean,attribute:"include-other"})],ie.prototype,"includeOther",void 0),v([d()],ie.prototype,"selectedChoices",void 0),ie=v([a("all-checklist")],ie);let ae=class extends X{constructor(){super(),this.transparencyActions=Object.values(o).filter((e=>e.includes("TRANSPARENCY."))),this.advancedSettings=[],this.restrictions={},this._additionalMessage="",this.addEventListener("transparency-action-select",(e=>{const t={action:e.detail.id,message:this._additionalMessage,restrictions:this.restrictions};this.setDemand(t)})),this.addEventListener("transparency-action-deselect",(e=>{const{id:t}=e.detail;this.deleteDemand(t)}))}handleProvenanceTermClick(e){const{id:t}=e.target;this.restrictions.provenance={term:t},this.demands.forEach((e=>{e.restrictions.provenance.term=t}))}handleAdditionalMessageInput(e){this._additionalMessage=e.target.value,this.demands.forEach((e=>{e.message=this._additionalMessage}))}validate(){return!0}getEditTemplate(e){var t;const a=Object.values(e).map((e=>e.action));return i` <p id="edit-heading-1"> <b>${n("Details of my TRANSPARENCY Demand")}</b> </p> <div class="light-border transparency-options"> <span slot="prompt"><b>${n("I want to know:")}</b></span> <all-checklist .choices="${this.transparencyActions.map((e=>{var t;return{id:e,description:x[e](),checked:a.includes(e),disabled:null===(t=!F.get(e))||void 0===t||t}}))}" all-message="${n("ALL information related to data processing practices and know if the organization has data on me")}" component-mode="${U.CLOSED}" event-prefix="transparency-action" include-buttons></all-checklist> </div> <slotted-dropdown header="${n("Advanced settings")}" include-buttons> <div> <span> ${n("My demand applies to data from the following provenance:")} </span> <fieldset class="provenance-restriction"> ${Object.values(p).map((t=>{var a,n;return i` <input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=e[0].restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===t}" @click="${this.handleProvenanceTermClick}">  <label for="${t}">${$[t]()}</label><br> `}))} </fieldset> </div> </slotted-dropdown> <slotted-dropdown header="${n("Additional message (optional)")}" include-buttons> <div class="additional-msg-ctr"> <span class="">${n("My additional message:")}</span> <span class="italic">${n("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${0!==e.length&&null!==(t=e[0].message)&&void 0!==t?t:""}"></textarea> </div> </slotted-dropdown> `}};ae.styles=[X.styles,y,w,N,I,e`:host{display:grid;row-gap:35px;align-content:flex-start;margin:0}.transparency-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],v([s({type:Array,attribute:!1})],ae.prototype,"transparencyActions",void 0),v([s({type:Array})],ae.prototype,"advancedSettings",void 0),v([s({attribute:!1})],ae.prototype,"restrictions",void 0),v([d()],ae.prototype,"_additionalMessage",void 0),ae=v([a("transparency-form")],ae);class ne extends t{constructor(){super(...arguments),this.demandState=G.EDIT_OPEN,this.demand={action:o.ACCESS},this.demandGroupId=self.crypto.randomUUID()}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demand:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.MENU}}))}handleAddClick(){this.validate()&&(this.addToPrivacyRequest(this.demandGroupId,this.demand),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:q.REVIEW}})))}render(){return i` <div> ${m(this.demandState,[[G.EDIT_OPEN,()=>this.getEditTemplate(this.demand)]])} </div> <div class="btns-ctr"> <button id="back-btn" class="nav-btn ctr-btn animated-btn" @click="${this.handleBackClick}"> ${n("Back")} </button> <button id="add-btn" class="nav-btn ctr-btn animated-btn" @click="${this.handleAddClick}"> ${n("Add demand to Privacy Request")} </button> </div> `}}ne.styles=[w,e`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:80%;max-width:375px}#add-btn{grid-column:3/4;min-width:80%;max-width:375px}`],v([s({type:Number,attribute:"demand-state"})],ne.prototype,"demandState",void 0),v([s({attribute:!1})],ne.prototype,"demand",void 0),v([s({type:String})],ne.prototype,"demandGroupId",void 0);let se=class extends ne{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("access-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:u.ALL,pp:g.ALL})})),this.addEventListener("access-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getEditTemplate(e){var t,a,s,d,o,c,l,h,m;return i` <div id="access-form"> <p id="edit-heading-1"> <b>${n("Details of my ACCESS Demand")}</b> </p> <div class="light-border access-options"> <span slot="prompt">${n("I want to access:")}</span> <all-checklist .choices="${this.allowedDataCategories.map((t=>{var i,a;return{id:t,description:D[t](),checked:-1!==(null===(a=null===(i=e.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((e=>e.dc===t))),disabled:!1}}))}" all-message="${n("ALL categories of data the organization has data on me")}" component-mode="${U.CLOSED}" event-prefix="access-option" include-buttons></all-checklist> </div> <slotted-dropdown header="${n("Advanced settings")}" include-buttons> <div class="date-restriction-ctr"> <p> ${n("Specify a date range for the selected category(ies) of data:")} </p> <div> <span>${n("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(t=e.restrictions)||void 0===t?void 0:t.date_range)||void 0===a?void 0:a.from)?null===(d=null===(s=e.restrictions)||void 0===s?void 0:s.date_range)||void 0===d?void 0:d.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${n("to")}</span> <input id="date-end" type="date" .value="${(null===(c=null===(o=e.restrictions)||void 0===o?void 0:o.date_range)||void 0===c?void 0:c.to)?null===(h=null===(l=e.restrictions)||void 0===l?void 0:l.date_range)||void 0===h?void 0:h.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> </div> </div> <div> <span> ${n("My demand applies to data from the following provenance:")} </span> <fieldset class="provenance-restriction"> ${Object.values(p).map((t=>{var a,n;return i` <input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===t}" @click="${this.handleProvenanceTermClick}">  <label for="${t}">${$[t]()}</label><br> `}))} </fieldset> </div> <div> <span> ${n("I address my demand to:")} </span> <fieldset class="provenance-restriction"> ${Object.values(r).filter((e=>e!==r.ALL)).map((t=>{var a,n;return i` <input id="${t}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===t}" @click="${this.handleProvenanceTargetClick}">  <label for="${t}">${P[t]()}</label><br> `}))} </fieldset> </div> </slotted-dropdown> <slotted-dropdown header="${n("Additional message (optional)")}" include-buttons> <div class="additional-msg-ctr"> <span class="">${n("My additional message:")}</span> <span class="italic">${n("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(m=e.message)&&void 0!==m?m:""}"></textarea> </div> </slotted-dropdown> </div> `}};se.styles=[ne.styles,y,w,N,I,e`#access-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.access-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],v([s({type:Array,attribute:!1})],se.prototype,"allowedDataCategories",void 0),se=v([a("access-form")],se);let de=class extends ne{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("delete-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:u.ALL,pp:g.ALL})})),this.addEventListener("delete-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getEditTemplate(e){var t,a,s,d,o,c,l,h,m;return i` <div id="delete-form"> <p id="edit-heading-1"> <b>${n("Details of my DELETE Demand")}</b> </p> <div class="light-border delete-options"> <span slot="prompt">${n("I want to delete:")}</span> <all-checklist .choices="${this.allowedDataCategories.map((t=>{var i,a;return{id:t,description:D[t](),checked:-1!==(null===(a=null===(i=e.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((e=>e.dc===t))),disabled:!1}}))}" all-message="${n("ALL categories of data the organization has data on me")}" component-mode="${U.CLOSED}" event-prefix="delete-option" include-buttons></all-checklist> </div> <slotted-dropdown header="${n("Advanced settings")}" include-buttons> <div class="date-restriction-ctr"> <p> ${n("Specify a date range for the selected category(ies) of data:")} </p> <div> <span>${n("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(t=e.restrictions)||void 0===t?void 0:t.date_range)||void 0===a?void 0:a.from)?null===(d=null===(s=e.restrictions)||void 0===s?void 0:s.date_range)||void 0===d?void 0:d.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${n("to")}</span> <input id="date-end" type="date" .value="${(null===(c=null===(o=e.restrictions)||void 0===o?void 0:o.date_range)||void 0===c?void 0:c.to)?null===(h=null===(l=e.restrictions)||void 0===l?void 0:l.date_range)||void 0===h?void 0:h.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> </div> </div> <div> <span> ${n("My demand applies to data from the following provenance:")} </span> <fieldset class="provenance-restriction"> ${Object.values(p).map((t=>{var a,n;return i` <input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===t}" @click="${this.handleProvenanceTermClick}">  <label for="${t}">${$[t]()}</label><br> `}))} </fieldset> </div> <div> <span> ${n("I address my demand to:")} </span> <fieldset class="provenance-restriction"> ${Object.values(r).filter((e=>e!==r.ALL)).map((t=>{var a,n;return i` <input id="${t}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===t}" @click="${this.handleProvenanceTargetClick}">  <label for="${t}">${P[t]()}</label><br> `}))} </fieldset> </div> </slotted-dropdown> <slotted-dropdown header="${n("Additional message (optional)")}" include-buttons> <div class="additional-msg-ctr"> <span class="">${n("My additional message:")}</span> <span class="italic">${n("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(m=e.message)&&void 0!==m?m:""}"></textarea> </div> </slotted-dropdown> </div> `}};de.styles=[ne.styles,y,w,N,I,e`#delete-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.delete-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],v([s({type:Array,attribute:!1})],de.prototype,"allowedDataCategories",void 0),de=v([a("delete-form")],de);let oe=class extends t{constructor(){super(),this.actions="",this._includedActions=K(),this._componentState=q.MENU,this._selectedAction=o.TRANSPARENCY,this._privacyRequest={demands:[],data_subject:[{id:"fdfc95a6-8fd8-4581-91f7-b3d236a6a10e",schema:"dsid"}],email:"",target:r.PARTNERS},this._demands=new Map,this._currentDemandGroupId="",this._currentRequestId="",this._config=j;const e=self.crypto.randomUUID();this._demands.set(e,[]),this._currentDemandGroupId=e,this.addEventListener("component-state-change",(e=>{const t=e.detail;switch(this._componentState=t.newState,this._componentState){case q.EDIT:this._selectedAction=t.newAction,void 0!==t.demandGroupId&&(this._currentDemandGroupId=t.demandGroupId);break;case q.SUBMITTED:break;case q.MENU:this._demands.set(this._currentDemandGroupId,[]);break;case q.STATUS:this._currentRequestId=t.requestId}})),this.addEventListener("demand-set-multiple",(e=>{const{demandGroupId:t,demands:i}=e.detail;this._demands.set(t,i)})),this.addEventListener("demand-set",(e=>{const{demandGroupId:t,demand:i}=e.detail;this._demands.set(t,[i])})),this.addEventListener("demand-delete",(e=>{const{demandGroupId:t}=e.detail;this._demands.delete(t),this.requestUpdate()})),this.addEventListener("request-target-change",(e=>{const{id:t}=e.detail;this._privacyRequest.target=t})),this.addEventListener("submit-request",(()=>{const e=Array.from(this._demands.values()).reduce(((e,t)=>e.concat(t)),[]);this._privacyRequest.demands=e.map(((e,t)=>(e.id=t.toString(),e))),W(this._privacyRequest,!1).then((e=>{this.dispatchEvent(new CustomEvent("component-state-change",{detail:{newState:q.STATUS,requestId:e.request_id}}))}))}))}handleRestartClick(){this._privacyRequest={demands:[],data_subject:[{id:"fdfc95a6-8fd8-4581-91f7-b3d236a6a10e",schema:"dsid"}],email:"",target:r.PARTNERS},this._demands=new Map}actionFormFactory(e){const t=this._demands.get(this._currentDemandGroupId);if(e===o.TRANSPARENCY){const a=t&&0!==t.length?t:function(e){if(e===o.TRANSPARENCY)return Object.values(o).filter((e=>e.includes("TRANSPARENCY."))).map((e=>({action:e,restrictions:{provenance:{term:p.ALL}}})));throw Error("Only TRANSPARENCY action should have multiple demands!")}(e);return i` <transparency-form .demands="${a}" .demandGroupId="${this._currentDemandGroupId}" .restrictions="${a[0].restrictions}"></transparency-form> `}const a=t&&0!==t.length?t[0]:function(e){switch(e){case o.ACCESS:case o.DELETE:return{action:e,restrictions:{privacy_scope:Object.values(l).filter((e=>!e.includes(".")&&!e.includes("*"))).map((e=>({dc:e,pc:u.ALL,pp:g.ALL}))),provenance:{term:p.ALL,target:r.SYSTEM},date_range:{}}};default:throw Error(`No default demand for action: ${e}!`)}}(e);return i` ${m(e,[[o.ACCESS,()=>i` <access-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._config["access-allowed-data-categories"]}"></access-form> `],[o.DELETE,()=>i` <delete-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._config["access-allowed-data-categories"]}"></delete-form> `],[o.MODIFY,()=>i``],[o.OBJECT,()=>i``],[o.PORTABILITY,()=>i``],[o.RESTRICT,()=>i``],[o.REVOKE,()=>i``],[o["OTHER.DEMAND"],()=>i``]],(()=>i`${n("Error: Invalid Action")}`))} `}getHeadingString(e){switch(e){case q.REQUESTS:return i`${n("My Submitted Privacy Request(s)")}`;case q.STATUS:return i`${n("My Privacy Request Status")}`;default:return i`${n("My Privacy Request")}`}}willUpdate(e){if(e.has("actions")&&this.actions)try{const e=Array.from(JSON.parse(this.actions)).map((e=>e.toLocaleLowerCase())),t=K().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedActions=t)}catch(e){this._includedActions=K()}}render(){return i` <div id="prci-ctr"> <div id="heading-ctr"> <span class="req-hdr">${this.getHeadingString(this._componentState)}</span> </div> ${m(this._componentState,[[q.MENU,()=>i` <div> <action-menu .includedActions="${this._includedActions}"></action-menu> </div> `],[q.EDIT,()=>i` <div class="medium-border view-ctr"> ${this.actionFormFactory(this._selectedAction)} </div> `],[q.REVIEW,()=>i` <div class="medium-border view-ctr"> ${h(this._demands.entries(),(([e,t])=>i`<review-view .demandGroupId="${e}" .demands="${t}"></review-view>`))} </div> `],[q.REQUESTS,()=>i` <requests-view></requests-view> `],[q.STATUS,()=>i` <status-view request-id="${this._currentRequestId}"></status-view>`],[q.SUBMITTED,()=>i` <p class="ctr-txt"> <b>${n("Your Privacy Request has been sent!")} 🎉</b> </p> <p class="ctr-txt"> ${n("You may track the status of your request below.")} </p> `],[q.AUTH,()=>i` <auth-view></auth-view> `]])} </div> `}};oe.styles=[w,N,y,e`:host{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16;background-color:#fff;text-align:left}:host button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif}:host p{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;margin:0}:host span{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif}#prci-ctr{padding:20px;max-width:1350px}#nav-bar{display:grid;grid-template-columns:repeat(3,1fr);align-items:center;padding:0 0 20px 0}#new-dmd-ctr{display:flex;column-gap:10px;padding:20px;align-items:center;justify-content:center}#request-progress-indicator{background-color:red}#frequent-requests{background-color:green}#restart-btn{background:#fafafa;border:none;width:fit-content;height:fit-content;text-decoration:underline;margin:20px 0}#req-sent-hdr{padding:40px 0}#other-dmd-btn{margin:20px 0 0 0;float:right}#heading-ctr{padding:0 0 40px 0;max-width:1170px}.req-hdr{display:block;font-weight:700;font-size:24px;grid-column:2/3;text-align:center}.new-dmd-btn{width:20px;display:flex;justify-content:center;align-items:center;text-align:center}button:disabled{background-color:#a9d1ff}.ctr-btn{justify-self:center}.demand-builder-next-btn{grid-column:2/3;margin-bottom:-50px}.ctr-txt{text-align:center}`],v([s({type:String,attribute:"actions"})],oe.prototype,"actions",void 0),v([d()],oe.prototype,"_includedActions",void 0),v([d()],oe.prototype,"_componentState",void 0),v([d()],oe.prototype,"_selectedAction",void 0),v([d()],oe.prototype,"_privacyRequest",void 0),v([d()],oe.prototype,"_demands",void 0),v([d()],oe.prototype,"_currentDemandGroupId",void 0),v([d()],oe.prototype,"_currentRequestId",void 0),v([d()],oe.prototype,"_config",void 0),oe=v([a("bldn-priv-request"),f()],oe);class re extends t{static get styles(){return e``}render(){return i`<bldn-priv-request></bldn-priv-request>`}}customElements.define("app-privacy",re);export{re as AppPrivacy};
