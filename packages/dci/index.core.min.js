import{css as t,LitElement as e,html as i}from"lit";import{property as s,state as n,customElement as r}from"lit/decorators.js";import{choose as a}from"lit/directives/choose.js";import{msg as d}from"@lit/localize";import{map as o}from"lit/directives/map.js";import{ACTION as p}from"@blindnet/prci/dist/models/priv-terms.js";import{when as c}from"lit/directives/when.js";function l(t,e,i,s){var n,r=arguments.length,a=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var d=t.length-1;d>=0;d--)(n=t[d])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a}const u=t`.base-btn{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif}.animated-btn{box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}.animated-btn:not([disabled]):hover{transform:translateY(-2px);transition:.2s;box-shadow:0 7px 10px 0 rgba(0,0,0,.3),0 4px 4px rgba(0,0,0,.2),0 6px 8px rgba(0,0,0,.2),0 10px 16px rgba(0,0,0,.2)}.animated-btn:not([disabled]):active{transform:translateY(2px);transition:.2s;box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}`;var b;!function(t){t[t.PENDING_DECISION=0]="PENDING_DECISION",t[t.APPROVED=1]="APPROVED",t[t.DENIED=2]="DENIED"}(b||(b={}));let m=class extends e{constructor(){super(...arguments),this.demand={id:"",date:"",action:p.ACCESS,data_subject:{id:"",schema:""}},this._open=!1,this._uiState=b.PENDING_DECISION}willUpdate(t){t.has("demand")&&async function(t){return fetch(`https://devkit-pce-staging.azurewebsites.net/v0/consumer-interface/pending-requests/${t}`,{method:"GET",headers:{accept:"application/json"}}).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))}(this.demand.id).then((t=>{this._demandDetails=t}))}approveDemand(){(async function(t,e,i="en"){return fetch("https://devkit-pce-staging.azurewebsites.net/v0/consumer-interface/pending-requests/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,msg:e,lang:i})}).then((t=>{if(!t.ok)throw new Error(t.statusText)}))})(this.demand.id,"Approved").then((()=>{this._uiState=b.APPROVED}))}denyDemand(){this._uiState=b.DENIED}render(){return i`${a(this._uiState,[[b.PENDING_DECISION,()=>i`<div id="summary-ctr" @click="${()=>{this._open=!this._open}}"><span class="dmd-info-element">${new Date(this.demand.date).toLocaleDateString("en-gb")}</span> <span class="dmd-info-element">John Smith</span> <span class="dmd-info-element">${this.demand.action}</span></div>${c(this._open,(()=>i`<div id="dmd-details-ctr">${c(this._demandDetails,(()=>i`<button id="approve-btn" class="dmd-btn animated-btn" @click="${this.approveDemand}">Approve</button> <button id="deny-btn" class="dmd-btn animated-btn" @click="${this.denyDemand}">Deny</button>`),(()=>i`Getting demand details...`))}</div>`))}`],[b.APPROVED,()=>i`<div class="decision-ctr">${d("Demand Approved ✅")}</div>`],[b.DENIED,()=>i`<div class="decision-ctr">${d("Demand Denied ❌")}</div>`]])}`}};m.styles=[u,t`:host{border:2px solid #5b5b5b;border-radius:10px;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}#summary-ctr{display:grid;grid-template-columns:repeat(3,1fr);padding:20px 0}.dmd-info-element{display:inline-flex;justify-items:center;text-align:center;justify-self:center;align-items:center}#dmd-details-ctr{display:flex;justify-items:center;justify-content:center;padding:20px;column-gap:40px}#approve-btn{border-color:#51d214}#deny-btn{border-color:#f90707}.dmd-btn{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:18px;padding:20px;border:4px solid;border-radius:10px;border-width:4px;background:0 0;width:200px;text-align:center}.decision-ctr{padding:20px;font-size:16px}li{text-align:left}`],l([s({attribute:!1})],m.prototype,"demand",void 0),l([n()],m.prototype,"_open",void 0),l([n()],m.prototype,"_demandDetails",void 0),l([n()],m.prototype,"_uiState",void 0),m=l([r("requests-list-item")],m);let S=class extends e{constructor(){super(),this._demands=[],this._intervalId=void 0,this.reloadRequests()}reloadRequests(){(async function(){return fetch("https://devkit-pce-staging.azurewebsites.net/v0/consumer-interface/pending-requests",{method:"GET",headers:{accept:"application/json"}}).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))})().then((t=>{this._demands=t}))}render(){return i`<div id="process-req-ctr"><span class="title"><b>${d("PRIVACY REQUESTS TO PROCESS")}</b></span><div id="requests-list"><div class="list-header-ctr"><span class="list-header"><b>${d("Submitted")}</b></span> <span class="list-header"><b>${d("Data Subject")}</b></span> <span class="list-header"><b>${d("Action(s)")}</b></span></div>${o(this._demands,(t=>i`<requests-list-item .demand="${t}"></requests-list-item>`))}</div></div>`}};S.styles=[u,t`#process-req-ctr{display:grid;row-gap:40px;text-align:center}#requests-list{display:grid;row-gap:10px}.list-header-ctr{display:grid;grid-template-columns:repeat(3,1fr);text-align:center}.title{font-size:22px}`],l([n()],S.prototype,"_demands",void 0),l([n()],S.prototype,"_intervalId",void 0),S=l([r("process-requests-view")],S);let v=class extends e{render(){return i``}};v.styles=[u,t``],v=l([r("request-history-view")],v);let h=class extends e{render(){return i``}};var x;h.styles=[u,t``],h=l([r("settings-view")],h),function(t){t[t.PROCESS_REQUESTS=0]="PROCESS_REQUESTS",t[t.REQUEST_HISTORY=1]="REQUEST_HISTORY",t[t.SETTINGS=2]="SETTINGS"}(x||(x={}));let g=class extends e{constructor(){super(...arguments),this._uiState=x.PROCESS_REQUESTS}render(){return i`<div id="dci-ctr"><div id="sidebar-ctr"><div id="user-ctr"></div><div id="view-btns-ctr"><button id="to-process-view-btn" class="view-btn animated-btn ${this._uiState===x.PROCESS_REQUESTS?"current-view-btn":""}" @click="${()=>{this._uiState=x.PROCESS_REQUESTS}}">Requests to process</button> <button id="req-history-view-btn" class="view-btn animated-btn ${this._uiState===x.REQUEST_HISTORY?"current-view-btn":""}" @click="${()=>{this._uiState=x.REQUEST_HISTORY}}">Requests history</button> <button id="settings-btn" class="view-btn animated-btn ${this._uiState===x.SETTINGS?"current-view-btn":""}" @click="${()=>{this._uiState=x.SETTINGS}}">Settings</button></div></div><div id="view-ctr">${a(this._uiState,[[x.PROCESS_REQUESTS,()=>i`<process-requests-view></process-requests-view>`],[x.REQUEST_HISTORY,()=>i`<request-history-view></request-history-view>`],[x.SETTINGS,()=>i`<settings-view></settings-view>`]])}</div></div>`}};g.styles=[u,t`:host{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16;max-width:1350px}:host button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16;max-width:1350px}#dci-ctr{display:grid;grid-template-columns:repeat(5,1fr)}#sidebar-ctr{grid-column:1/2}#view-btns-ctr{display:grid;padding:20px;row-gap:20px}.view-btn{border:none;background:0 0;padding:40px;border-radius:10px;background-color:#d9d9d9;color:#000;font-size:18px}.current-view-btn{background-color:#5b5b5b;color:#fff}#view-ctr{grid-column:2/6;justify-content:center}`],l([n()],g.prototype,"_uiState",void 0),g=l([r("bldn-data-consum")],g);export{g as DataConsumerInterface};
//# sourceMappingURL=index.core.min.js.map
