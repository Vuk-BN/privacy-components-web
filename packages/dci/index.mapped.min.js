import{css as t,LitElement as e,html as s}from"https://unpkg.com/lit@~2.2.8/index.js?module";import{property as i,state as n,customElement as r}from"https://unpkg.com/lit@~2.2.8/decorators.js?module";import{choose as a}from"https://unpkg.com/lit@~2.2.8/directives/choose.js?module";import{msg as d}from"https://unpkg.com/@lit/localize@~0.11.3/lit-localize.js?module";import{map as o}from"https://unpkg.com/lit@~2.2.8/directives/map.js?module";import{ACTION as p}from"https://unpkg.com/@blindnet/prci@~0.4.0/dist/models/priv-terms.js?module";import{when as c}from"https://unpkg.com/lit@~2.2.8/directives/when.js?module";function l(t,e,s,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var d=t.length-1;d>=0;d--)(n=t[d])&&(a=(r<3?n(a):r>3?n(e,s,a):n(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a}const u=t`.base-btn{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif}.animated-btn{box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}.animated-btn:not([disabled]):hover{transform:translateY(-2px);transition:.2s;box-shadow:0 7px 10px 0 rgba(0,0,0,.3),0 4px 4px rgba(0,0,0,.2),0 6px 8px rgba(0,0,0,.2),0 10px 16px rgba(0,0,0,.2)}.animated-btn:not([disabled]):active{transform:translateY(2px);transition:.2s;box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}`;var m;!function(t){t[t.PENDING_DECISION=0]="PENDING_DECISION",t[t.APPROVED=1]="APPROVED",t[t.DENIED=2]="DENIED"}(m||(m={}));let b=class extends e{constructor(){super(...arguments),this.demand={id:"",date:"",action:p.ACCESS,data_subject:{id:"",schema:""}},this._open=!1,this._uiState=m.PENDING_DECISION}willUpdate(t){t.has("demand")&&async function(t){return fetch(`https://devkit-pce-staging.azurewebsites.net/v0/consumer-interface/pending-requests/${t}`,{method:"GET",headers:{accept:"application/json"}}).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))}(this.demand.id).then((t=>{this._demandDetails=t}))}approveDemand(){(async function(t,e,s="en"){return fetch("https://devkit-pce-staging.azurewebsites.net/v0/consumer-interface/pending-requests/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,msg:e,lang:s})}).then((t=>{if(!t.ok)throw new Error(t.statusText)}))})(this.demand.id,"Approved").then((()=>{this._uiState=m.APPROVED}))}denyDemand(){this._uiState=m.DENIED}render(){return s`${a(this._uiState,[[m.PENDING_DECISION,()=>s`<div id="summary-ctr" @click="${()=>{this._open=!this._open}}"><span class="dmd-info-element">${new Date(this.demand.date).toLocaleDateString("en-gb")}</span> <span class="dmd-info-element">John Smith</span> <span class="dmd-info-element">${this.demand.action}</span></div>${c(this._open,(()=>s`<div id="dmd-details-ctr">${c(this._demandDetails,(()=>s`<button id="approve-btn" class="dmd-btn animated-btn" @click="${this.approveDemand}">Approve</button> <button id="deny-btn" class="dmd-btn animated-btn" @click="${this.denyDemand}">Deny</button>`),(()=>s`Getting demand details...`))}</div>`))}`],[m.APPROVED,()=>s`<div class="decision-ctr">${d("Demand Approved ✅")}</div>`],[m.DENIED,()=>s`<div class="decision-ctr">${d("Demand Denied ❌")}</div>`]])}`}};b.styles=[u,t`:host{border:2px solid #5b5b5b;border-radius:10px;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}#summary-ctr{display:grid;grid-template-columns:repeat(3,1fr);padding:20px 0}.dmd-info-element{display:inline-flex;justify-items:center;text-align:center;justify-self:center;align-items:center}#dmd-details-ctr{display:flex;justify-items:center;justify-content:center;padding:20px;column-gap:40px}#approve-btn{border-color:#51d214}#deny-btn{border-color:#f90707}.dmd-btn{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:18px;padding:20px;border:4px solid;border-radius:10px;border-width:4px;background:0 0;width:200px;text-align:center}.decision-ctr{padding:20px;font-size:16px}li{text-align:left}`],l([i({attribute:!1})],b.prototype,"demand",void 0),l([n()],b.prototype,"_open",void 0),l([n()],b.prototype,"_demandDetails",void 0),l([n()],b.prototype,"_uiState",void 0),b=l([r("requests-list-item")],b);let h=class extends e{constructor(){super(),this._demands=[],this._intervalId=void 0,this.reloadRequests()}reloadRequests(){(async function(){return fetch("https://devkit-pce-staging.azurewebsites.net/v0/consumer-interface/pending-requests",{method:"GET",headers:{accept:"application/json"}}).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))})().then((t=>{this._demands=t}))}render(){return s`<div id="process-req-ctr"><span class="title"><b>${d("PRIVACY REQUESTS TO PROCESS")}</b></span><div id="requests-list"><div class="list-header-ctr"><span class="list-header"><b>${d("Submitted")}</b></span> <span class="list-header"><b>${d("Data Subject")}</b></span> <span class="list-header"><b>${d("Action(s)")}</b></span></div>${o(this._demands,(t=>s`<requests-list-item .demand="${t}"></requests-list-item>`))}</div></div>`}};h.styles=[u,t`#process-req-ctr{display:grid;row-gap:40px;text-align:center}#requests-list{display:grid;row-gap:10px}.list-header-ctr{display:grid;grid-template-columns:repeat(3,1fr);text-align:center}.title{font-size:22px}`],l([n()],h.prototype,"_demands",void 0),l([n()],h.prototype,"_intervalId",void 0),h=l([r("process-requests-view")],h);let S=class extends e{render(){return s``}};S.styles=[u,t``],S=l([r("request-history-view")],S);let v=class extends e{render(){return s``}};var g;v.styles=[u,t``],v=l([r("settings-view")],v),function(t){t[t.PROCESS_REQUESTS=0]="PROCESS_REQUESTS",t[t.REQUEST_HISTORY=1]="REQUEST_HISTORY",t[t.SETTINGS=2]="SETTINGS"}(g||(g={}));let x=class extends e{constructor(){super(...arguments),this._uiState=g.PROCESS_REQUESTS}render(){return s`<div id="dci-ctr"><div id="sidebar-ctr"><div id="user-ctr"></div><div id="view-btns-ctr"><button id="to-process-view-btn" class="view-btn animated-btn ${this._uiState===g.PROCESS_REQUESTS?"current-view-btn":""}" @click="${()=>{this._uiState=g.PROCESS_REQUESTS}}">Requests to process</button> <button id="req-history-view-btn" class="view-btn animated-btn ${this._uiState===g.REQUEST_HISTORY?"current-view-btn":""}" @click="${()=>{this._uiState=g.REQUEST_HISTORY}}">Requests history</button> <button id="settings-btn" class="view-btn animated-btn ${this._uiState===g.SETTINGS?"current-view-btn":""}" @click="${()=>{this._uiState=g.SETTINGS}}">Settings</button></div></div><div id="view-ctr">${a(this._uiState,[[g.PROCESS_REQUESTS,()=>s`<process-requests-view></process-requests-view>`],[g.REQUEST_HISTORY,()=>s`<request-history-view></request-history-view>`],[g.SETTINGS,()=>s`<settings-view></settings-view>`]])}</div></div>`}};x.styles=[u,t`:host{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16;max-width:1350px}:host button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16;max-width:1350px}#dci-ctr{display:grid;grid-template-columns:repeat(5,1fr)}#sidebar-ctr{grid-column:1/2}#view-btns-ctr{display:grid;padding:20px;row-gap:20px}.view-btn{border:none;background:0 0;padding:40px;border-radius:10px;background-color:#d9d9d9;color:#000;font-size:18px}.current-view-btn{background-color:#5b5b5b;color:#fff}#view-ctr{grid-column:2/6;justify-content:center}`],l([n()],x.prototype,"_uiState",void 0),x=l([r("bldn-data-consum")],x);export{x as DataConsumerInterface};
//# sourceMappingURL=index.mapped.min.js.map
