{"version":3,"file":"ReviewView.js","sources":["../src/ReviewView.ts"],"sourcesContent":["import { msg } from '@lit/localize';\nimport { css, html, LitElement, PropertyValueMap } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { map } from 'lit/directives/map.js';\nimport { when } from 'lit/directives/when.js';\nimport { Demand } from './models/demand.js';\nimport { ACTION } from './models/priv-terms.js';\nimport { buttonStyles, containerStyles } from './styles.js';\nimport { ACTION_DESCRIPTIONS, ACTION_TITLES } from './utils/dictionary.js';\nimport { ComponentState } from './utils/states.js';\n\n@customElement('review-view')\nexport class ReviewView extends LitElement {\n  @property({ attribute: false }) demandGroupId: string = '';\n\n  @property({ attribute: false }) demands: Demand[] = [];\n\n  @property({ type: Boolean, reflect: true, attribute: 'confirm-delete' })\n  confirmDelete: boolean = false;\n\n  @state() _action: ACTION = ACTION.ACCESS;\n\n  static styles = [\n    containerStyles,\n    buttonStyles,\n    css`\n      :host {\n        display: grid;\n        row-gap: 20px;\n        padding: 40px 40px 40px 40px;\n      }\n\n      :host([confirm-delete]) {\n        background: #c4c4c4;\n        opacity: 0.7;\n      }\n\n      #review-heading-row {\n        display: grid;\n        grid-area: 1/1/2/2;\n        grid-template-columns: repeat(2, 1fr);\n        z-index: 2;\n      }\n\n      #review-btns {\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        column-gap: 20px;\n      }\n\n      .review-btn {\n        width: 24px;\n        height: 24px;\n      }\n\n      #review-content {\n        display: grid;\n        grid-area: 2/1/3/2;\n        row-gap: 20px;\n        z-index: 1;\n      }\n\n      #transparency-extra-msg {\n        padding: 0px 0px 0px 20px;\n      }\n\n      .review-list li:not(:last-child) {\n        margin: 0px 0px 20px 0px;\n      }\n\n      .review-list {\n        margin: 0px;\n      }\n\n      #delete-confirm-popup {\n        display: grid;\n        row-gap: 20px;\n        background: white;\n        padding: 40px;\n        z-index: 2;\n        grid-area: 1/1/3/2;\n        justify-self: center;\n        align-self: center;\n        width: 40%;\n        height: 150px;\n      }\n\n      .popup-txt {\n        text-align: center;\n      }\n\n      #popup-btns-ctr {\n        display: flex;\n        column-gap: 50px;\n        justify-content: center;\n      }\n\n      .popup-btn {\n        width: 200px;\n        font-size: 18px;\n      }\n\n      #confirm-delete-btn {\n        background: red;\n        color: white;\n        border: none;\n      }\n\n      #cancel-delete-btn {\n        background: white;\n        color: black;\n        border: 2px solid #18a0fb;\n      }\n    `,\n  ];\n\n  getAccessReviewTemplate() {\n    return html``;\n  }\n\n  getDeleteReviewTemplate() {\n    return html``;\n  }\n\n  getModifyReviewTemplate() {\n    return html``;\n  }\n\n  getObjectReviewTemplate() {\n    return html``;\n  }\n\n  getPortabilityReviewTemplate() {\n    return html``;\n  }\n\n  getRestrictReviewTemplate() {\n    return html``;\n  }\n\n  getRevokeReviewTemplate() {\n    return html``;\n  }\n\n  getTransparencyReviewTemplate() {\n    // console.log(this.demands)\n    return html`\n      <span>I want to know:</span>\n      <ul id=\"transparency-review-list\" class=\"review-list\">\n        ${map(\n          this.demands,\n          d => html` <li><b>${ACTION_DESCRIPTIONS[d.action]()}</b></li> `\n        )}\n      </ul>\n      ${when(\n        this.demands[0].message,\n        () => html`\n          <span>${msg('Plus additional info:')}</span>\n          <span id=\"transparency-extra-msg\"\n            ><i>${this.demands[0].message}</i></span\n          >\n        `\n      )}\n    `;\n  }\n\n  getOtherDemandReviewTemplate() {\n    return html``;\n  }\n\n  handleEditClick() {\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.EDIT,\n          // Use transparency action for any of its subtypes\n          newAction: this.demands[0].action.includes('TRANSPARENCY')\n            ? ACTION.TRANSPARENCY\n            : this.demands[0].action,\n          demandGroupId: this.demandGroupId,\n        },\n      })\n    );\n  }\n\n  handleDeleteClick() {\n    this.confirmDelete = true;\n  }\n\n  handleConfirmDeleteClick() {\n    this.dispatchEvent(\n      new CustomEvent('demand-delete', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          demandGroupId: this.demandGroupId,\n        },\n      })\n    );\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.MENU,\n        },\n      })\n    );\n  }\n\n  handleCancelDeleteClick() {\n    this.confirmDelete = false;\n  }\n\n  /**\n   * Determine the action to use for this review container whenever demands changes\n   * @param _changedProperties Properties that have changed in this update\n   */\n  protected willUpdate(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    if (_changedProperties.has('demands') && this.demands.length > 0) {\n      this._action = this.demands[0].action;\n      if (this._action.includes('TRANSPARENCY')) {\n        this._action = ACTION.TRANSPARENCY;\n      }\n    }\n  }\n\n  render() {\n    return html`\n      <div id=\"review-heading-row\">\n        <span id=\"review-action-heading\"><b>${ACTION_TITLES[\n          this._action\n        ]()} demand</b></span>\n        <div id=\"review-btns\">\n          <button id=\"review-edit-btn\" class=\"svg-btn review-btn\" @click=${\n            this.handleEditClick\n          }>\n            <img src=\"packages/prci/src/assets/icons/pepicons_pen.svg\" alt=\"edit icon\"></img>\n          </button>\n          <button id=\"review-delete-btn\" class=\"svg-btn review-btn\" @click=${\n            this.handleDeleteClick\n          }>\n            <img src=\"packages/prci/src/assets/icons/ion_trash-bin.svg\" alt=\"delete icon\"></img>\n          </button>\n        </div>\n      </div>\n      <div id=\"review-content\">\n        ${choose(this._action, [\n          [ACTION.ACCESS, () => this.getAccessReviewTemplate()],\n          [ACTION.DELETE, () => this.getDeleteReviewTemplate()],\n          [ACTION.MODIFY, () => this.getModifyReviewTemplate()],\n          [ACTION.OBJECT, () => this.getObjectReviewTemplate()],\n          [ACTION.PORTABILITY, () => this.getPortabilityReviewTemplate()],\n          [ACTION.RESTRICT, () => this.getRestrictReviewTemplate()],\n          [ACTION.REVOKE, () => this.getRevokeReviewTemplate()],\n          [ACTION.TRANSPARENCY, () => this.getTransparencyReviewTemplate()],\n          [ACTION['OTHER.DEMAND'], () => this.getOtherDemandReviewTemplate()],\n        ])}\n      </div>\n      ${when(\n        this.confirmDelete,\n        () => html`\n          <div id=\"delete-confirm-popup\" class=\"no-line-border\">\n            <span class=\"popup-txt\"\n              >${msg('You are about to remove a demand')}</span\n            >\n            <span class=\"popup-txt\"\n              >${msg(html`Do you confirm <b>deleting this demand</b>?`)}</span\n            >\n            <div id=\"popup-btns-ctr\">\n              <button\n                id=\"confirm-delete-btn\"\n                class=\"curve-btn popup-btn\"\n                @click=${this.handleConfirmDeleteClick}\n              >\n                ${msg('Delete')}\n              </button>\n              <button\n                id=\"cancel-delete-btn\"\n                class=\"curve-btn popup-btn\"\n                @click=${this.handleCancelDeleteClick}\n              >\n                ${msg('Cancel')}\n              </button>\n            </div>\n          </div>\n        `\n      )}\n      </div>\n    `;\n  }\n}\n"],"names":[],"mappings":"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"}