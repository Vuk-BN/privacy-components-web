import{css as e,LitElement as t,html as i}from"https://unpkg.com/lit@~2.2.8/index.js?module";import{property as n,customElement as s,state as d}from"https://unpkg.com/lit@~2.2.8/decorators.js?module";import{when as a}from"https://unpkg.com/lit@~2.2.8/directives/when.js?module";import{map as r}from"https://unpkg.com/lit@~2.2.8/directives/map.js?module";import{choose as o}from"https://unpkg.com/lit@~2.2.8/directives/choose.js?module";import{msg as p,localized as c}from"https://unpkg.com/@lit/localize@~0.11.3/lit-localize.js?module";function l(e,t,i,n){var s,d=arguments.length,a=d<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(d<3?s(a):d>3?s(t,i,a):s(t,i))||a);return d>3&&a&&Object.defineProperty(t,i,a),a}var m,h;!function(e){e.ACCESS="ACCESS",e.DELETE="DELETE",e.MODIFY="MODIFY",e.OBJECT="OBJECT",e.PORTABILITY="PORTABILITY",e.RESTRICT="RESTRICT",e.REVOKE="REVOKE-CONSENT",e.TRANSPARENCY="TRANSPARENCY",e["TRANSPARENCY.DATA.CATEGORIES"]="TRANSPARENCY.DATA-CATEGORIES",e["TRANSPARENCY.DPO"]="TRANSPARENCY.DPO",e["TRANSPARENCY.KNOWN"]="TRANSPARENCY.KNOWN",e["TRANSPARENCY.LEGAL.BASES"]="TRANSPARENCY.LEGAL-BASES",e["TRANSPARENCY.ORGANIZATION"]="TRANSPARENCY.ORGANIZATION",e["TRANSPARENCY.POLICY"]="TRANSPARENCY.POLICY",e["TRANSPARENCY.PROCESSING.CATEGORIES"]="TRANSPARENCY.PROCESSING-CATEGORIES",e["TRANSPARENCY.PROVENANCE"]="TRANSPARENCY.PROVENANCE",e["TRANSPARENCY.PURPOSE"]="TRANSPARENCY.PURPOSE",e["TRANSPARENCY.RETENTION"]="TRANSPARENCY.RETENTION",e["TRANSPARENCY.WHERE"]="TRANSPARENCY.WHERE",e["TRANSPARENCY.WHO"]="TRANSPARENCY.WHO",e["OTHER.DEMAND"]="OTHER-DEMAND"}(m||(m={})),function(e){e.TRANSPARENCY_DATA_CATEGORIES="TRANSPARENCY.DATA-CATEGORIES",e.TRANSPARENCY_DPO="TRANSPARENCY.DPO",e.TRANSPARENCY_KNOWN="TRANSPARENCY.KNOWN",e.TRANSPARENCY_LEGAL_BASES="TRANSPARENCY.LEGAL-BASES",e.TRANSPARENCY_ORGANIZATION="TRANSPARENCY.ORGANIZATION",e.TRANSPARENCY_POLICY="TRANSPARENCY.POLICY",e.TRANSPARENCY_PROCESSING_CATEGORIES="TRANSPARENCY.PROCESSING-CATEGORIES",e.TRANSPARENCY_PROVENANCE="TRANSPARENCY.PROVENANCE",e.TRANSPARENCY_PURPOSE="TRANSPARENCY.PURPOSE",e.TRANSPARENCY_RETENTION="TRANSPARENCY.RETENTION",e.TRANSPARENCY_WHERE="TRANSPARENCY.WHERE",e.TRANSPARENCY_WHO="TRANSPARENCY.WHO"}(h||(h={}));const E=new Map([[m.ACCESS,!1],[m.DELETE,!1],[m.MODIFY,!1],[m.OBJECT,!1],[m.PORTABILITY,!1],[m.RESTRICT,!1],[m.REVOKE,!1],[m.TRANSPARENCY,!0],[m["TRANSPARENCY.DATA.CATEGORIES"],!1],[m["TRANSPARENCY.DPO"],!0],[m["TRANSPARENCY.KNOWN"],!1],[m["TRANSPARENCY.LEGAL.BASES"],!1],[m["TRANSPARENCY.ORGANIZATION"],!0],[m["TRANSPARENCY.POLICY"],!0],[m["TRANSPARENCY.PROCESSING.CATEGORIES"],!1],[m["TRANSPARENCY.PURPOSE"],!1],[m["TRANSPARENCY.PROVENANCE"],!1],[m["TRANSPARENCY.RETENTION"],!0],[m["TRANSPARENCY.WHERE"],!0],[m["TRANSPARENCY.WHO"],!0],[m["OTHER.DEMAND"],!1]]),R={ACCESS:()=>p("ACCESS"),DELETE:()=>p("DELETE"),MODIFY:()=>p("MODIFY"),OBJECT:()=>p("OBJECT"),PORTABILITY:()=>p("PORTABILITY"),RESTRICT:()=>p("RESTRICT"),"REVOKE-CONSENT":()=>p("REVOKE-CONSENT"),TRANSPARENCY:()=>p("TRANSPARENCY"),"TRANSPARENCY.DATA-CATEGORIES":()=>p("TRANSPARENCY.DATA-CATEGORIES"),"TRANSPARENCY.DPO":()=>p("TRANSPARENCY.DPO"),"TRANSPARENCY.KNOWN":()=>p("TRANSPARENCY.KNOWN"),"TRANSPARENCY.LEGAL-BASES":()=>p("TRANSPARENCY.LEGAL-BASES"),"TRANSPARENCY.ORGANIZATION":()=>p("TRANSPARENCY.ORGANIZATION"),"TRANSPARENCY.POLICY":()=>p("TRANSPARENCY.POLICY"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>p("TRANSPARENCY.PROCESSING-CATEGORIES"),"TRANSPARENCY.PROVENANCE":()=>p("TRANSPARENCY.PROVENANCE"),"TRANSPARENCY.PURPOSE":()=>p("TRANSPARENCY.PURPOSE"),"TRANSPARENCY.RETENTION":()=>p("TRANSPARENCY.RETENTION"),"TRANSPARENCY.WHERE":()=>p("TRANSPARENCY.WHERE"),"TRANSPARENCY.WHO":()=>p("TRANSPARENCY.WHO"),"OTHER-DEMAND":()=>p("OTHER-DEMAND")},A={ACCESS:()=>p("Access my data"),DELETE:()=>p("Have my data deleted"),MODIFY:()=>p("Modify or complement my data"),OBJECT:()=>p("Object to processing of my data"),PORTABILITY:()=>p("Take my data and have it transfered somewhere else"),RESTRICT:()=>p("Restrict processing of my data to a particular scope"),"REVOKE-CONSENT":()=>p("Revoke previously given consent for data processing"),TRANSPARENCY:()=>p("Demand information related to data processing practices and know if the system has data on me"),"OTHER-DEMAND":()=>p("Do or know something else"),"TRANSPARENCY.DATA-CATEGORIES":()=>p("The categories of the data the organization has on me"),"TRANSPARENCY.DPO":()=>p("The contact details of the data protection officer"),"TRANSPARENCY.KNOWN":()=>p("If the organization has data on me"),"TRANSPARENCY.LEGAL-BASES":()=>p("The legal bases for processing my data (including legitimate interests)"),"TRANSPARENCY.ORGANIZATION":()=>p("The identity and contact details of the organization processing my data"),"TRANSPARENCY.POLICY":()=>p("The policies applied to processing of data concerning me"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>p("The cateogories of processing being done on the data the organization has on me"),"TRANSPARENCY.PROVENANCE":()=>p("The sources that the data concerning me come from"),"TRANSPARENCY.PURPOSE":()=>p("The purpose of the processing o the data the organization has on me"),"TRANSPARENCY.RETENTION":()=>p("For how long the data concerning me kept"),"TRANSPARENCY.WHERE":()=>p("Where the data about me is stored"),"TRANSPARENCY.WHO":()=>p("Who can access the data that the organization has on me")};var N,u;!function(e){e[e.BUILD=0]="BUILD",e[e.REVIEW=1]="REVIEW",e[e.SENT=2]="SENT"}(N||(N={})),function(e){e[e.SELECT_ACTION=0]="SELECT_ACTION",e[e.EDIT=1]="EDIT",e[e.REVIEW=2]="REVIEW"}(u||(u={}));let T=class extends t{constructor(){super(...arguments),this.actionName="",this.actionDescription="",this.disabled=!1}handleClick(){const e=new CustomEvent("demand-action-menu-click",{bubbles:!0,composed:!0,detail:{actionName:this.actionName}});this.dispatchEvent(e)}render(){return i`<button class="action-button draw-border" @click="${this.handleClick}" ?disabled="${this.disabled}"><strong>${this.actionName}:</strong> ${this.actionDescription}</button>`}};T.styles=e`:host button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1rem}.action-button:not([disabled]):hover{border:2px solid #18a0fb;overflow:visible}.action-button{border-radius:15px;background-color:#fafafa;padding:10px 40px;height:120px;width:100%;max-width:400px;text-align:left;transition:.5s;-webkit-transition:.5s;overflow:hidden;text-overflow:ellipsis}.btn-txt{overflow:hidden}.bolder{font-weight:700}`,l([n({type:String,attribute:"action-name"})],T.prototype,"actionName",void 0),l([n({type:String,attribute:"action-description"})],T.prototype,"actionDescription",void 0),l([n({type:Boolean})],T.prototype,"disabled",void 0),T=l([s("action-item"),c()],T);let S=class extends t{constructor(){super(...arguments),this.prompt="Type of demand I want to submit:",this.includedActions=[]}render(){return i`<div class="prompt-heading">${this.prompt}</div><div class="actions-container">${this.includedActions.map((e=>i`<action-item action-name="${R[e]()}" action-description="${A[e]()}" ?disabled="${!E.get(e)}"></action-item>`))}</div>`}};S.styles=e`:host{grid-column:1/5}.actions-container{display:grid;grid-template-columns:repeat(3,1fr);gap:50px;padding:30px 40px 10px 40px}.prompt-heading{font-size:18px;text-align:left;padding:0 0 0 10px}`,l([n({type:String})],S.prototype,"prompt",void 0),l([n({attribute:!1})],S.prototype,"includedActions",void 0),S=l([c(),s("demand-builder-action-menu")],S);let C=class extends t{constructor(){super(...arguments),this.prompt="I want to know:",this.choices=[],this.open=!0,this._selectedChoices=new Set}handleCheckboxClick(e){const{id:t,checked:i}=e.target;if(i){this._selectedChoices.add(t);const e=new CustomEvent("dropdown-element-add",{bubbles:!0,composed:!0,detail:{id:t,"first-selection":1===this._selectedChoices.size}});this.dispatchEvent(e)}else{this._selectedChoices.delete(t);const e=new CustomEvent("dropdown-element-delete",{bubbles:!0,composed:!0,detail:{id:t,"none-selected":0===this._selectedChoices.size}});this.dispatchEvent(e)}}render(){return i`<p id="prompt">${this.prompt}</p><button id="drpdwn-collapse-btn" @click="${()=>{this.open=!this.open}}"></button><div id="choices-list">${this.choices.map((e=>i`<div id="choice-ctr"><input id="${e.id}" type="checkbox" @click="${this.handleCheckboxClick}" ?checked="${e.checked}" ?disabled="${e.disabled}"> <label>${e.description}</label></div>`))}</div>`}};C.styles=e`:host{display:grid;grid-template-columns:repeat(8,1fr);border:2px solid #000;border-radius:10px;padding:20px 40px 20px 40px}:host([open]){padding:20px 40px 40px 40px}:host([open]) #choices-list{display:grid}:host([open]) #drpdwn-collapse-btn{background:url(/src/assets/icons/close_container_arrow.svg)}#prompt{display:flex;grid-column:1/8;align-items:center}#drpdwn-collapse-btn{grid-column:8/9;height:24px;background:url(/src/assets/icons/open_container_arrow.svg);width:24px;border:none;justify-self:right}#choices-list{display:none;overflow:hidden;grid-column:1/9;grid-template-columns:1fr;row-gap:35px;padding:25px 0 0 0}#choice-ctr{padding:0 30px}p{margin:0}`,l([n({type:String})],C.prototype,"prompt",void 0),l([n({type:Array})],C.prototype,"choices",void 0),l([n({type:Boolean,reflect:!0})],C.prototype,"open",void 0),C=l([s("demand-builder-dropdown-element")],C);let b=class extends t{constructor(){super(...arguments),this.prompt="Additional Message (optional)",this.open=!1}handleInput(e){const t=new CustomEvent("text-element-change",{bubbles:!0,composed:!0,detail:{text:e.target.value}});this.dispatchEvent(t)}render(){return i`<p id="element-prompt">${this.prompt}</p><button id="text-element-write-button" @click="${()=>{this.open=!this.open}}"></button> <textarea id="text-input" name="paragraph_text" cols="50" rows="5" @input="${this.handleInput}"></textarea>`}};b.styles=e`:host{display:grid;grid-template-columns:7fr 1fr;border:2px solid #000;border-radius:10px;padding:20px 40px 20px 40px}:host([open]) #text-input{display:grid}#element-prompt{display:flex;align-items:center}#text-element-write-button{height:30px;background:url(/src/assets/icons/edit_fill.svg);height:24px;width:24px;border:none;justify-self:right}#text-input{display:none;overflow:hidden;grid-column:1/3;margin:25px 0 0 0}p{margin:0}`,l([n({type:String})],b.prototype,"prompt",void 0),l([n({type:Boolean,reflect:!0})],b.prototype,"open",void 0),b=l([s("demand-builder-text-element")],b);let g=class extends t{constructor(){super(),this.demandState=u.EDIT,this.transparencyActions=[],this.demands=new Map,this.demandBuilderId="",this._extraMessage=void 0,this.addEventListener("dropdown-element-add",(e=>{const t=e.detail,i=crypto.randomUUID(),n={action:t.id,message:this._extraMessage};this.demands.set(i,n);const s=new CustomEvent("demand-set",{bubbles:!0,composed:!0,detail:{demandId:i,demand:n}});if(this.dispatchEvent(s),t["first-selection"]){const e=new CustomEvent("demand-validated",{bubbles:!0,composed:!0,detail:{demandBuilderId:this.demandBuilderId}});this.dispatchEvent(e)}})),this.addEventListener("dropdown-element-delete",(e=>{const t=e.detail;if(Array.from(this.demands).filter((([e,i])=>i.action===t.id)).forEach((([e,t])=>{this.demands.delete(e);const i=new CustomEvent("demand-delete",{bubbles:!0,composed:!0,detail:{id:e}});this.dispatchEvent(i)})),t["none-selected"]){const e=new CustomEvent("demand-invalidated",{bubbles:!0,composed:!0,detail:{demandBuilderId:this.demandBuilderId}});this.dispatchEvent(e)}})),this.addEventListener("text-element-change",(e=>{var t;this._extraMessage=null===(t=e.detail)||void 0===t?void 0:t.text,this.demands.forEach((e=>{e.message=this._extraMessage}));const i=new CustomEvent("demand-set-multiple",{bubbles:!0,composed:!0,detail:{demands:this.demands}});this.dispatchEvent(i)}))}getEditTemplate(){const e=Object.values(this.demands).map((e=>e.action));return i`<p id="edit-heading-1"><b>${p("Details of my TRANSPARENCY Demand")}</b></p><demand-builder-dropdown-element .choices="${this.transparencyActions.map((t=>{var i;return{id:t,description:A[t](),checked:e.includes(t),disabled:null===(i=!E.get(t))||void 0===i||i}}))}"></demand-builder-dropdown-element><demand-builder-text-element></demand-builder-text-element>`}getReviewTemplate(){return i`<div id="dmd-ctr"><p id="review-hd-1"><b>${p("TRANSPARENCY demand")}</b></p><p>${p("I want to know:")}</p><ul id="transparency-demand-review-list">${Array.from(this.demands.values()).map((e=>i`<li><b>${A[e.action]()}</b></li>`))}</ul>${this._extraMessage?i`<p>${p("Plus additional info:")}</p><p id="extra-msg-txt"><i>${this._extraMessage}</i></p>`:null}</div>`}render(){return i`${o(this.demandState,[[u.EDIT,()=>this.getEditTemplate()],[u.REVIEW,()=>this.getReviewTemplate()]])}`}};g.styles=e`:host{display:grid;row-gap:35px;grid-column:2/5;align-content:flex-start;border:2px solid #000;border-radius:20px;padding:40px 60px 40px 60px;margin:0}:host([demand-state='2']){padding:30px;grid-column:1/5}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0 0 0 10px}#review-heading-1{font-weight:700}#extra-msg-txt{padding:0 0 0 20px}p{margin:0}`,l([n({type:Number,attribute:"demand-state"})],g.prototype,"demandState",void 0),l([n({type:Array,attribute:!1})],g.prototype,"transparencyActions",void 0),l([n({attribute:!1})],g.prototype,"demands",void 0),l([n({attribute:!1})],g.prototype,"demandBuilderId",void 0),g=l([s("transparency-form")],g);let y=class extends t{constructor(){super(...arguments),this.checked=!1,this.disabled=!1,this.id=m.ACCESS,this.title="",this.description=""}handleClick(){const e=new CustomEvent("sidebar-click",{bubbles:!0,composed:!0,detail:{id:this.id}});this.dispatchEvent(e)}render(){return i`<button class="sidebar-btn" ?disabled="${this.disabled}" @click="${this.handleClick}"><input type="radio" ?disabled="${this.disabled}" ?checked="${this.checked}"><span class="sidebar-txt"><b>${this.title}:</b> ${this.description}</span></button>`}};y.styles=e`:host{min-height:100px}:host button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16px;background-color:#fff}:host([checked]) .sidebar-btn{border:2px solid #000;border-top-left-radius:20px;border-bottom-left-radius:20px;border-right:2px solid #fff}:host([checked]){z-index:1;margin-right:-2px}.sidebar-btn{display:grid;align-items:center;grid-template-columns:1fr 4fr;height:100%;width:100%;border:none;text-align:left}.sidebar-txt{padding:0 10px 0 0}`,l([n({type:Boolean})],y.prototype,"checked",void 0),l([n({type:Boolean})],y.prototype,"disabled",void 0),l([n({})],y.prototype,"id",void 0),l([n({type:String})],y.prototype,"title",void 0),l([n({type:String})],y.prototype,"description",void 0),y=l([s("demand-builder-sidebar-item")],y);let P=class extends t{constructor(){super(),this.includedActions=[],this.demandState=u.SELECT_ACTION,this.demands=new Map,this._selectedAction=m.TRANSPARENCY,this._sidebarSelectedIndex=0,this.addEventListener("demand-set",(e=>{const{demandId:t,demand:i}=e.detail;this.demands.set(t,i)})),this.addEventListener("demand-delete",(e=>{const{id:t}=e.detail;this.demands.delete(t)})),this.addEventListener("demand-set-multiple",(e=>{e.detail.demands.forEach(((e,t)=>this.demands.set(t,e)))})),this.addEventListener("demand-action-menu-click",(()=>{this._selectedAction=m.TRANSPARENCY,this.demandState=u.EDIT})),this.addEventListener("sidebar-click",(e=>{this._sidebarSelectedIndex=this.includedActions.indexOf(e.detail.id)}))}getSidebarTemplate(){return i`<div id="sidebar"><p id="sidebar-title">${p("Type of demand:")}</p>${this.includedActions.map(((e,t)=>i`<demand-builder-sidebar-item id="${e}" title="${R[e]()}" description="${A[e]()}" ?disabled="${!E.get(e)}" ?checked="${t===this._sidebarSelectedIndex}"></demand-builder-sidebar-item>`))}</div>`}getSelectedFormTemplate(){return i`${o(this._selectedAction,[[m.TRANSPARENCY,()=>i`<transparency-form demand-state="${this.demandState}" .demandBuilderId="${this.id}" .transparencyActions="${Object.values(m).filter((e=>e.includes("TRANSPARENCY.")))}" .demands="${this.demands}"></transparency-form>`]])}`}update(e){super.update(e),e.has("demandState")&&e.get("demandState")===u.SELECT_ACTION&&this.dispatchEvent(new Event("menu-done",{bubbles:!0,composed:!0}))}firstUpdated(e){super.firstUpdated(e),this._sidebarSelectedIndex=this.includedActions.indexOf(this._selectedAction)}render(){return this.demandState===u.SELECT_ACTION?i`<demand-builder-action-menu .includedActions="${this.includedActions}"></demand-builder-action-menu>`:i`${a(this.demandState===u.EDIT,(()=>this.getSidebarTemplate()))} ${this.getSelectedFormTemplate()}`}};P.styles=e`:host{display:grid;grid-row:2/3;grid-column:1/2;grid-template-columns:repeat(4,1fr)}.demand-builder-back-btn{grid-column-start:1/2}#sidebar{display:grid;height:fit-content}p{padding:0;margin:0}`,l([n({type:Array})],P.prototype,"includedActions",void 0),l([n({type:Number,attribute:"demand-state"})],P.prototype,"demandState",void 0),l([n({attribute:!1})],P.prototype,"demands",void 0),l([d()],P.prototype,"_selectedAction",void 0),l([d()],P.prototype,"_sidebarSelectedIndex",void 0),P=l([s("demand-builder"),c()],P);let f=class extends t{render(){return i``}};f.styles=e``,f=l([s("request-progress-indicator")],f);let v=class extends t{render(){return i``}};v.styles=e``,v=l([s("frequent-requests-menu")],v);let O=class extends t{constructor(){super(...arguments),this.response={response_id:"",request_id:"",date:"",demands:[{demand_id:"",date:"",requested_action:m.TRANSPARENCY}]}}accessTemplate(e){return i``}deleteTemplate(e){return i``}modifyTemplate(e){return i``}objectTemplate(e){return i``}revokeTemplate(e){return i``}restrictTemplate(e){return i``}portabilityTemplate(e){return i``}transparencyStandardTemplate(e){return i`<div class="transparency-rsp-ctr"><li><b>${A[e.requested_action]()}</b> - ${e.status}</li>${JSON.stringify(e.answer)}</div>`}transparencyAllTemplate(e){return this.transparencyStandardTemplate(e)}transparencyDataCatTemplate(e){return this.transparencyStandardTemplate(e)}transparencyDpoTemplate(e){return this.transparencyStandardTemplate(e)}transparencyKnownTemplate(e){return this.transparencyStandardTemplate(e)}transparencyLegalTemplate(e){return this.transparencyStandardTemplate(e)}transparencyOrgTemplate(e){return this.transparencyStandardTemplate(e)}transparencyPolicyTemplate(e){return this.transparencyStandardTemplate(e)}transparencyProcessTemplate(e){return this.transparencyStandardTemplate(e)}transparencyProvTemplate(e){return this.transparencyStandardTemplate(e)}transparencyPurposeTemplate(e){return this.transparencyStandardTemplate(e)}transparencyRetentionTemplate(e){return this.transparencyStandardTemplate(e)}transparencyWhoTemplate(e){return this.transparencyStandardTemplate(e)}transparencyWhereTemplate(e){return this.transparencyStandardTemplate(e)}otherDemandTemplate(e){return i``}render(){return i`<h1>Requested Information</h1><div id="responses-ctr">${r(this.response.demands,(e=>o(e.requested_action,[[m.ACCESS,()=>this.accessTemplate(e)],[m.DELETE,()=>this.deleteTemplate(e)],[m.MODIFY,()=>this.modifyTemplate(e)],[m.OBJECT,()=>this.objectTemplate(e)],[m.REVOKE,()=>this.revokeTemplate(e)],[m.RESTRICT,()=>this.restrictTemplate(e)],[m.PORTABILITY,()=>this.portabilityTemplate(e)],[m.TRANSPARENCY,()=>this.transparencyAllTemplate(e)],[m["TRANSPARENCY.DATA.CATEGORIES"],()=>this.transparencyDataCatTemplate(e)],[m["TRANSPARENCY.DPO"],()=>this.transparencyDpoTemplate(e)],[m["TRANSPARENCY.KNOWN"],()=>this.transparencyKnownTemplate(e)],[m["TRANSPARENCY.LEGAL.BASES"],()=>this.transparencyLegalTemplate(e)],[m["TRANSPARENCY.ORGANIZATION"],()=>this.transparencyOrgTemplate(e)],[m["TRANSPARENCY.POLICY"],()=>this.transparencyPolicyTemplate(e)],[m["TRANSPARENCY.PROCESSING.CATEGORIES"],()=>this.transparencyProcessTemplate(e)],[m["TRANSPARENCY.PROVENANCE"],()=>this.transparencyProvTemplate(e)],[m["TRANSPARENCY.PURPOSE"],()=>this.transparencyPurposeTemplate(e)],[m["TRANSPARENCY.RETENTION"],()=>this.transparencyRetentionTemplate(e)],[m["TRANSPARENCY.WHERE"],()=>this.transparencyWhereTemplate(e)],[m["TRANSPARENCY.WHO"],()=>this.transparencyWhoTemplate(e)],[m["OTHER.DEMAND"],()=>this.otherDemandTemplate(e)]],(()=>i`${p("ERROR: Invalid Action")}`))))}</div>`}};function x(e){if(e.demands.length>1)return"code=200, example=TRANSPARENCY Multi-Response";if(1===e.demands.length){const{action:t}=e.demands[0];return`code=200, example=${t} Response`}return"code=400"}function I(){return Object.values(m).filter((e=>!e.includes("TRANSPARENCY.")))}O.styles=e`:host{border:2px solid #000;border-radius:20px;padding:35px 75px}:host h1{padding:0;margin:0;font-size:24px;text-align:center}#responses-ctr{display:grid;row-gap:40px;padding:50px 0 0 0}.transparency-rsp-ctr{display:grid;row-gap:10px}`,l([n({attribute:!1})],O.prototype,"response",void 0),O=l([s("response-view")],O);let Y=class extends t{constructor(){super(),this.actions="",this._includedActions=I(),this._requestState=N.BUILD,this._privacyRequest={demands:[],data_subject:[{id:"4f04dbb4-d77d-49df-ae57-52aae9d6f3b5",schema:"dsid"}]},this._demands=new Map,this._demandBuilders=new Map([[crypto.randomUUID(),!1]]),this._showButtons=!1,this._buttonsClickable=!1,this._privacyResponse={response_id:"",request_id:"",date:"",demands:[]},this.addEventListener("demand-set",(e=>{const{demandId:t,demand:i}=e.detail;this._demands.set(t,i)})),this.addEventListener("demand-delete",(e=>{const{id:t}=e.detail;this._demands.delete(t)})),this.addEventListener("demand-set-multiple",(e=>{e.detail.demands.forEach(((e,t)=>this._demands.set(t,e)))})),this.addEventListener("demand-validated",(e=>{const{demandBuilderId:t}=e.detail;this._demandBuilders.set(t,!0),this._buttonsClickable=Array.from(this._demandBuilders.values()).every((e=>!0===e))})),this.addEventListener("demand-invalidated",(e=>{const{demandBuilderId:t}=e.detail;this._demandBuilders.set(t,!1),this._buttonsClickable=Array.from(this._demandBuilders.values()).every((e=>!0===e))})),this.addEventListener("menu-done",(()=>{this._showButtons=!0}))}handleSubmitClick(){this._privacyRequest.demands=Array.from(this._demands.values()).map(((e,t)=>(e.id=t.toString(),e))),async function(e,t=!0){const i=t?"https://stoplight.io/mocks/blindnet/product-management:open-api/74767654/privacy-request":"https://devkit-pce-staging.azurewebsites.net/v0/privacy-request",n=t?{"Content-Type":"application/json",Prefer:x(e)}:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"};return fetch(i,{method:"POST",headers:n,body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}(this._privacyRequest,!1).then((e=>{this._privacyResponse=e})),this._requestState=N.SENT}handleReviewClick(){this._requestState=N.REVIEW}handleRestartClick(){this._requestState=N.BUILD,this._privacyRequest={demands:[{action:m.TRANSPARENCY}],data_subject:[{id:"4f04dbb4-d77d-49df-ae57-52aae9d6f3b5",schema:"dsid"}]},this._demands=new Map,this._demandBuilders=new Map([[crypto.randomUUID(),!1]]),this._showButtons=!1,this._buttonsClickable=!1,this._privacyResponse={response_id:"",request_id:"",date:"",demands:[]}}willUpdate(e){if(e.has("actions")&&this.actions)try{const e=Array.from(JSON.parse(this.actions)).map((e=>e.toLocaleLowerCase())),t=I().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedActions=t)}catch(e){this._includedActions=I()}}render(){return i`<div id="priv-req-ctr"><div class="req-hdr">${p("My Privacy Request")}</div><request-progress-indicator></request-progress-indicator>${a(this._requestState===N.BUILD||this._requestState===N.REVIEW,(()=>i`${r(this._demandBuilders.entries(),(([e])=>i`<demand-builder id="${e}" .includedActions="${this._includedActions}" demand-state="${this._requestState===N.REVIEW?u.REVIEW:u.SELECT_ACTION}"></demand-builder>`))} ${a(this._showButtons,(()=>i`${o(this._requestState,[[N.BUILD,()=>i`<button class="nav-btn right-btn" ?disabled="${!this._buttonsClickable}" @click="${this.handleReviewClick}">${p("Continue to submit Privacy Request")}</button>`],[N.REVIEW,()=>i`<button class="nav-btn ctr-btn" ?disabled="${!this._buttonsClickable}" @click="${this.handleSubmitClick}">${p("Submit Privacy Request")}</button>`]])}`))}`))} ${a(this._requestState===N.SENT,(()=>i`<strong id="req-sent-hdr" class="ctr-txt">${p("Your privacy request has been sent!")}</strong><p class="ctr-txt">${p("You may view the response below.")}</p><button id="restart-btn" class="ctr-txt ctr-btn" href="" @click="${this.handleRestartClick}">${p("Submit a new Privacy Request.")}</button>`))}</div>${a(this._requestState===N.SENT,(()=>i`<response-view .response="${this._privacyResponse}"></response-view>`))}`}};Y.styles=e`:host{display:grid;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:16;max-width:1350px;background-color:#fff}:host button{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif}#priv-req-ctr{display:grid;border:2px solid #000;border-radius:20px;padding:30px;margin:0 0 30px 0}#new-dmd-ctr{display:flex;column-gap:10px;margin:20px 0 0 0;padding:20px;border:2px solid #000;border-radius:20px;align-items:center;justify-content:center}#request-progress-indicator{background-color:red}#frequent-requests{background-color:green}#restart-btn{background:#fafafa;border:none;width:fit-content;height:fit-content;text-decoration:underline;margin:20px 0}#req-sent-hdr{padding:40px 0}.req-hdr{font-weight:700;font-size:24px;text-align:center;padding-bottom:20px}.new-dmd-btn{width:20px;display:flex;justify-content:center;align-items:center;text-align:center}.nav-btn{height:50px;background-color:#18a0fb;border-width:0;border-radius:6px;font-size:18px;color:#fff;width:fit-content;margin:20px 0 -55px 0;padding:0 25px}button:disabled{background-color:#a9d1ff}.ctr-btn{justify-self:center}.right-btn{justify-self:flex-end;margin:20px 60px -55px 0}.demand-builder-next-btn{grid-column:2/3;margin-bottom:-50px}.ctr-txt{text-align:center}`,l([n({type:String,attribute:"actions"})],Y.prototype,"actions",void 0),l([d()],Y.prototype,"_includedActions",void 0),l([d()],Y.prototype,"_requestState",void 0),l([d()],Y.prototype,"_privacyRequest",void 0),l([d()],Y.prototype,"_demands",void 0),l([d()],Y.prototype,"_demandBuilders",void 0),l([d()],Y.prototype,"_showButtons",void 0),l([d()],Y.prototype,"_buttonsClickable",void 0),l([d()],Y.prototype,"_privacyResponse",void 0),Y=l([s("bldn-priv-request"),c()],Y);export{Y as BldnPrivRequest};
//# sourceMappingURL=index.mapped.min.js.map
