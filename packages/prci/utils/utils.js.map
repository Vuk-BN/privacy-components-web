{"version":3,"file":"utils.js","sources":["../../src/utils/utils.ts"],"sourcesContent":["import { Demand } from '../models/demand.js';\nimport {\n  ACTION,\n  DATA_CATEGORY,\n  PROCESSING_CATEGORY,\n  PROVENANCE,\n  PURPOSE,\n  TARGET,\n} from '../models/priv-terms.js';\n\nexport function getDefaultActions() {\n  return Object.values(ACTION).filter(a => !a.includes('TRANSPARENCY.'));\n}\n\nexport function getDefaultDemand(action: ACTION): Demand {\n  switch (action) {\n    case ACTION.ACCESS:\n      return {\n        action,\n        restrictions: {\n          privacy_scope: Object.values(DATA_CATEGORY)\n            .filter(dc => !dc.includes('.') && !dc.includes('*'))\n            .map(dc => ({\n              dc,\n              pc: PROCESSING_CATEGORY.ALL,\n              pp: PURPOSE.ALL,\n            })),\n          provenance: {\n            term: PROVENANCE.ALL,\n            target: TARGET.SYSTEM,\n          },\n          date_range: {},\n        },\n      };\n\n    case ACTION.DELETE:\n      return {\n        action,\n        restrictions: {\n          privacy_scope: Object.values(DATA_CATEGORY)\n            .filter(dc => !dc.includes('.') && !dc.includes('*'))\n            .map(dc => ({\n              dc,\n              pc: PROCESSING_CATEGORY.ALL,\n              pp: PURPOSE.ALL,\n            })),\n          provenance: {\n            term: PROVENANCE.ALL,\n            target: TARGET.SYSTEM,\n          },\n          date_range: {},\n        },\n      };\n\n    default:\n      throw Error(`No default demand for action: ${action}!`);\n  }\n}\n\nexport function getDefaultDemands(action: ACTION): Demand[] {\n  if (action === ACTION.TRANSPARENCY) {\n    return Object.values(ACTION)\n      .filter(a => a.includes('TRANSPARENCY.'))\n      .map(a => ({\n        action: a,\n        restrictions: {\n          provenance: {\n            term: PROVENANCE.ALL,\n          },\n        },\n      }));\n  }\n  throw Error('Only TRANSPARENCY action should have multiple demands!');\n}\n"],"names":[],"mappings":";;SAUgB,iBAAiB,GAAA;IAC/B,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC;AACzE,CAAC;AAEK,SAAU,gBAAgB,CAAC,MAAc,EAAA;AAC7C,IAAA,QAAQ,MAAM;QACZ,KAAK,MAAM,CAAC,MAAM;YAChB,OAAO;gBACL,MAAM;AACN,gBAAA,YAAY,EAAE;AACZ,oBAAA,aAAa,EAAE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC;yBACxC,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACpD,yBAAA,GAAG,CAAC,EAAE,KAAK;wBACV,EAAE;wBACF,EAAE,EAAE,mBAAmB,CAAC,GAAG;wBAC3B,EAAE,EAAE,OAAO,CAAC,GAAG;AAChB,qBAAA,CAAC,CAAC;AACL,oBAAA,UAAU,EAAE;wBACV,IAAI,EAAE,UAAU,CAAC,GAAG;wBACpB,MAAM,EAAE,MAAM,CAAC,MAAM;AACtB,qBAAA;AACD,oBAAA,UAAU,EAAE,EAAE;AACf,iBAAA;aACF,CAAC;QAEJ,KAAK,MAAM,CAAC,MAAM;YAChB,OAAO;gBACL,MAAM;AACN,gBAAA,YAAY,EAAE;AACZ,oBAAA,aAAa,EAAE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC;yBACxC,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACpD,yBAAA,GAAG,CAAC,EAAE,KAAK;wBACV,EAAE;wBACF,EAAE,EAAE,mBAAmB,CAAC,GAAG;wBAC3B,EAAE,EAAE,OAAO,CAAC,GAAG;AAChB,qBAAA,CAAC,CAAC;AACL,oBAAA,UAAU,EAAE;wBACV,IAAI,EAAE,UAAU,CAAC,GAAG;wBACpB,MAAM,EAAE,MAAM,CAAC,MAAM;AACtB,qBAAA;AACD,oBAAA,UAAU,EAAE,EAAE;AACf,iBAAA;aACF,CAAC;AAEJ,QAAA;AACE,YAAA,MAAM,KAAK,CAAC,CAAA,8BAAA,EAAiC,MAAM,CAAA,CAAA,CAAG,CAAC,CAAC;AAC3D,KAAA;AACH,CAAC;AAEK,SAAU,iBAAiB,CAAC,MAAc,EAAA;AAC9C,IAAA,IAAI,MAAM,KAAK,MAAM,CAAC,YAAY,EAAE;AAClC,QAAA,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;aACzB,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;AACxC,aAAA,GAAG,CAAC,CAAC,KAAK;AACT,YAAA,MAAM,EAAE,CAAC;AACT,YAAA,YAAY,EAAE;AACZ,gBAAA,UAAU,EAAE;oBACV,IAAI,EAAE,UAAU,CAAC,GAAG;AACrB,iBAAA;AACF,aAAA;AACF,SAAA,CAAC,CAAC,CAAC;AACP,KAAA;AACD,IAAA,MAAM,KAAK,CAAC,wDAAwD,CAAC,CAAC;AACxE;;;;"}